<div class="application-error-display" *ngIf="errorLoadingApplicationDetails">
  <span class="submit-error">{{ errorMessage }}</span>
</div>
<ng-container>
  <mat-horizontal-stepper
    *ngIf="!smallScreen && !errorLoadingApplicationDetails"
    labelPosition="bottom"
    [linear]="true"
    #stepper
  >
    <ng-container>
      <mat-step [stepControl]="firstFormGroup">
        <ng-template matStepLabel>Policy</ng-template>
        <ng-container>
          <form [formGroup]="firstFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="insurer"
                          (selectionChange)="onChanged($event)"
                          [disabled]="makeInputDisable()"
                        >
                          <mat-option
                            *ngFor="let option of insurerDropdown"
                            value="{{ option.id }}"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insurer' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >LOB<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="product"
                          (selectionChange)="onInsurerChanged($event)"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of insuranceProductsCopy"
                            value="{{ option.lob }}_{{ option.productType }}"
                          >
                            {{ option.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'product' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Product Name<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select
                          formControlName="productName"
                          (selectionChange)="onProductSelect($event)"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of productDropdown"
                            [value]="option.productId"
                          >
                            {{ option.productName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'productName' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >SP<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="sp">
                          <mat-option
                            *ngFor="let option of spDropdown"
                            [value]="option.spCode"
                            [disabled]="makeInputDisable()"
                          >
                            {{ option.spName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'sp' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="status"
                          [disabled]="checkStatus()"
                          (selectionChange)="onStatusChange($event)"
                        >
                          <mat-option
                            *ngFor="let option of statusDropDown"
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'status' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Branch Code<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="branchCode"
                          readonly
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'branchCode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Lead Generator<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select
                          formControlName="lgCode"
                          [disabled]="makeInputDisable()"
                          (selectionChange)="onLGChange($event)"
                        >
                          <mat-option>
                            <ngx-mat-select-search
                              placeholderLabel="Search"
                              noEntriesFoundLabel="Not Found"
                              formControlName="searchCtrl1"
                            >
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option
                            *ngFor="
                              let option of lgDropDown
                                | searchDropDown
                                  : firstFormGroup.get('searchCtrl1').value
                                  : 'value'
                            "
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'lgCode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="loggedIn">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Application No<span
                            *ngIf="firstFormGroup.get('status').value == 2"
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="insurerApplicationNo"
                          [disabled]="makeInputDisable()"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insurerApplicationNo' }
                        "
                      >
                      </ng-container>
                    </div>
                    <ng-container *ngIf="optionalField">
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Policy Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="pt"
                            (change)="onPTChanged($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'pt' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Premium Paying Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="ppt"
                            (keyup)="onPPTChanged($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'ppt' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Mode</mat-label>
                          <mat-select formControlName="mode">
                            <mat-option
                              *ngFor="let option of modeDropdown"
                              [value]="option.id"
                              >{{ option.value }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'mode' }
                          "
                        ></ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Total Premium with GST:</mat-label>
                          <input
                            matInput
                            (keyup)="calculateGST($event.target.value)"
                            class="form-control minimal"
                            formControlName="premiumAmount"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'premiumAmount' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Base Premium</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="basePremium"
                            [disabled]="makeInputDisable()"
                            (keyup)="checkBasePremium($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'basePremium' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>GST</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="gst"
                            [disabled]="makeInputDisable()"
                            (keyup)="checkGST($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'gst' }
                          "
                        ></ng-container>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="remainingField">
                      <ng-container *ngIf="isIssued">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Number<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyNo"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyNo' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="pt"
                              (change)="onPTChanged($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'pt' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Policy Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="confirmpt"
                              (keyup)="confirmCheck($event, 1)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmpt' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Start Date<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyStartDate"
                              (dateInput)="inputEvent2($event)"
                              matInput
                              [matDatepicker]="dobpicker2"
                              readonly
                              [min]="past"
                              [max]="currentAndFutureday"
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker2"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker2></mat-datepicker>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyStartDate' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy End Date<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyEndDate"
                              matInput
                              [matDatepicker]="dobpicker3"
                              readonly
                              disabled
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker3"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker3></mat-datepicker>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyEndDate' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Premium Paying Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="ppt"
                              (keyup)="onPPTChanged($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'ppt' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Premium Paying Term<span
                                class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="confirmppt"
                              (keyup)="confirmCheck($event, 2)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmppt' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Mode<span class="man-field">*</span></mat-label
                            >
                            <mat-select formControlName="mode">
                              <mat-option
                                *ngFor="let option of modeDropdown"
                                [value]="option.id"
                                >{{ option.value }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'mode' }
                            "
                          ></ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Total Premium with GST:<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              (keyup)="calculateGST($event.target.value)"
                              class="form-control minimal"
                              formControlName="premiumAmount"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'premiumAmount' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Total Premium with GST:<span
                                class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              (keyup)="confirmCheck($event, 3)"
                              class="form-control minimal"
                              formControlName="confirmpremiumAmount"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmpremiumAmount' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Base Premium<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="basePremium"
                              [disabled]="makeInputDisable()"
                              (keyup)="checkBasePremium($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'basePremium' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >GST<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="gst"
                              [disabled]="makeInputDisable()"
                              (keyup)="checkGST($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'gst' }
                            "
                          ></ng-container>
                        </div>
                      </ng-container>
                      <ng-container
                        *ngIf="
                          !isIssued &&
                          !uwStatus &&
                          firstFormGroup.get('status').value !== 2
                        "
                      >
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Remarks<span
                                *ngIf="firstFormGroup.get('status').value == 6"
                                class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="remarks"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'remarks' }
                            "
                          >
                          </ng-container>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button
                class="next-btn"
                [disabled]="!firstFormGroup.valid"
                mat-button
                (click)="goToNextScreen(stepper, 0)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="paymentForm" *ngIf="showPaymentInfo">
        <ng-template matStepLabel>Payment Info</ng-template>
        <ng-container>
          <form [formGroup]="paymentForm">
            <mat-card class="margin-bottom-30">
              <mat-card-content>
                <div
                  fxLayout="row wrap"
                  fxLayout.xs="column"
                  fxLayout.sm="column"
                  fxLayoutGap="15px"
                >
                  <div class="margin-top-5" fxFlex="32">
                    <label>Payment Type</label>
                    <mat-radio-group
                      class="display-flex"
                      aria-label="Select an option"
                      formControlName="paymentType"
                    >
                      <ng-container
                        *ngFor="let payment of paymentTypes; let first = first"
                      >
                        <div
                          class="account-type-radio-box"
                          [ngClass]="{ 'margin-left': !first }"
                        >
                          <mat-radio-button
                            (change)="onPaymentMethodChange($event)"
                            [disabled]="
                              (accountDetails === undefined ||
                                (accountDetails !== undefined &&
                                  accountDetails.length === 0)) &&
                              payment.id === 'DBT'
                            "
                            color="primary"
                            value="{{ payment?.id }}"
                          >
                            {{ payment?.value }}
                          </mat-radio-button>
                        </div>
                      </ng-container>
                    </mat-radio-group>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
            <mat-card class="margin-bottom-30">
              <mat-card-content>
                <div
                  fxLayout="row wrap"
                  fxLayout.xs="column"
                  fxLayout.sm="column"
                  fxLayoutGap="15px"
                >
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value === 'DBT'"
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Account Number<span class="man-field">*</span>
                      </mat-label>
                      <mat-select formControlName="accountNumber">
                        <mat-option
                          *ngFor="let account of accountDetails"
                          [value]="account?.accountNo"
                        >
                          {{ account?.accountNo }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('accountNumber').touched &&
                        paymentForm.get('accountNumber').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value === 'DBT'"
                  >
                    <mat-form-field
                      class="full-width"
                      color="accent"
                      appearance="fill"
                    >
                      <mat-label
                        >Payment Reference Number(Batch Number/UTR
                        number)</mat-label
                      >
                      <input matInput formControlName="referenceNo" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('referenceNo').touched &&
                        paymentForm.get('referenceNo').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                        >Cheque Number<span class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <mat-label
                        *ngIf="paymentForm.get('paymentType').value === 'DD'"
                        >DD Number<span class="man-field">*</span></mat-label
                      >
                      <input
                        matInput
                        placeholder="Last 6 digits of the Cheque No."
                        formControlName="chequeOrDDNo"
                      />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chequeOrDDNo').touched &&
                        paymentForm.get('chequeOrDDNo').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chequeOrDDNo').touched &&
                        paymentForm.get('chequeOrDDNo').hasError('pattern')
                      "
                      >Please enter a valid Cheque No.</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                  >
                    <mat-form-field
                      class="full-width"
                      color="accent"
                      appearance="fill"
                    >
                      <mat-label
                        *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                        >Cheque Date<span class="man-field">*</span>
                      </mat-label>
                      <mat-label
                        *ngIf="paymentForm.get('paymentType').value === 'DD'"
                        >DD Date<span class="man-field">*</span>
                      </mat-label>
                      <input
                        readonly
                        [min]="threeMonthsBack"
                        [max]="todaysDate"
                        matInput
                        [matDatepicker]="picker"
                        formControlName="chkOrDDDate"
                      />
                      <mat-datepicker-toggle
                        matSuffix
                        [for]="picker"
                      ></mat-datepicker-toggle>
                      <mat-datepicker #picker color="primary"></mat-datepicker>
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chkOrDDDate').touched &&
                        paymentForm.get('chkOrDDDate').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >IFSC Code<span
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput formControlName="ifscCode" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('ifscCode').touched &&
                        paymentForm.get('ifscCode').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('ifscCode').touched &&
                        paymentForm.get('ifscCode').hasError('pattern')
                      "
                      >Please enter a valid IFSC Code</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >MICR Code<span
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput formControlName="micrCode" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('micrCode').touched &&
                        paymentForm.get('micrCode').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('micrCode').touched &&
                        paymentForm.get('micrCode').hasError('pattern')
                      "
                      >Please enter a valid MICR Code</span
                    >
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Premium Payable<span class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input
                        matInput
                        readonly
                        formControlName="premiumPayable"
                      />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Insurer Name<span class="man-field">*</span></mat-label
                      >
                      <input matInput readonly formControlName="insurerName" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Customer Name<span class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput readonly formControlName="customerName" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Date of Payment<span class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input
                        [min]="threeMonthsBack"
                        [max]="todaysDate"
                        matInput
                        [matDatepicker]="picker"
                        readonly
                        formControlName="dateOfPayment"
                      />
                      <mat-datepicker-toggle
                        matSuffix
                        [for]="picker"
                      ></mat-datepicker-toggle>
                      <mat-datepicker #picker color="primary"></mat-datepicker>
                    </mat-form-field>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>
                Back
              </button>
              <button
                class="next-btn"
                [disabled]="!paymentForm.valid"
                mat-button
                (click)="goToNextScreen(stepper, 1)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup">
        <ng-template matStepLabel>Proposer</ng-template>
        <ng-container *ngIf="showProposer">
          <form [formGroup]="secondFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="title">
                          <mat-option
                            *ngFor="let option of titleDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'title' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >First Name<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="firstName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'firstName' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Last Name<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="lastName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'lastName' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Date of Birth<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="dob"
                          (dateInput)="inputEvent($event)"
                          matInput
                          [matDatepicker]="dobpicker"
                          readonly
                          [min]="MinDate()"
                          [max]="maxAdultDate"
                        />
                        <mat-datepicker-toggle
                          matSuffix
                          [for]="dobpicker"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #dobpicker></mat-datepicker>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'dob' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="gender">
                          <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'gender' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select formControlName="maritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'maritalStatus' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Email<span class="man-field">*</span></mat-label
                        >
                        <input matInput type="email" formControlName="email" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'email' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Mobile Number<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="mobile" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mobile' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>PAN Card</mat-label>
                        <input
                          matInput
                          formControlName="panNo"
                          *ngIf="remainingField"
                          readonly
                        />
                        <input
                          matInput
                          formControlName="panNo"
                          *ngIf="!remainingField"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'panNo' }
                        "
                      ></ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>
                Back
              </button>
              <button
                class="next-btn"
                [disabled]="!secondFormGroup.valid"
                mat-button
                (click)="goToNextScreen(stepper, 1)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="thirdFormGroup">
        <ng-template matStepLabel>Contact Info</ng-template>
        <ng-container *ngIf="showContactInfo">
          <form [formGroup]="thirdFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label
                      >Are the Permanent and Mailing address the
                      same?</mat-label
                    >
                    <mat-radio-group
                      (change)="onRadioChange($event)"
                      class="display-flex"
                      aria-label="Select an option"
                      formControlName="addressSame"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes"
                          >Yes</mat-radio-button
                        >
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no"
                          >No</mat-radio-button
                        >
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card class="margin-bottom-30">
                <p class="margin-top-30">Permanent Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="policyaddressline1" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline1' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Address Line 2<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="policyaddressline2" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline2' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="policyaddressline3" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline3' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Pincode<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="policypostalcode"
                          (keyup)="onPostalCodeChange($event.target.value, 0)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policypostalcode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >City<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="policycity"
                          readonly="makeReadOnly()"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policycity' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >State<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="policystate"
                          readonly
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policystate' }
                        "
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card
                class="margin-bottom-30"
                *ngIf="thirdFormGroup.get('addressSame').value === 'no'"
              >
                <p class="margin-top-30">Mailing Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="mailingaddressline1" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline1' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Address Line 2<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="mailingaddressline2" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline2' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="mailingaddressline3" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline3' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Pincode<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="mailingpostalcode"
                          (keyup)="onPostalCodeChange($event.target.value, 1)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingpostalcode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >City<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="mailingcity"
                          readonly="makeReadOnly()"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingcity' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >State<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="mailingstate"
                          readonly="makeReadOnly()"
                          readonly
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingstate' }
                        "
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>
                Back
              </button>
              <button
                class="next-btn"
                [disabled]="!thirdFormGroup.valid"
                mat-button
                (click)="goToNextScreen(stepper, 2)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Summary</ng-template>
        <form [formGroup]="summaryFormGroup" *ngIf="showSummary">
          <ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Policy</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 0, 0)"
              >
                <span class="icon-rounded">
                  <mat-icon
                    class="red-icon"
                    aria-hidden="false"
                    aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="summaryInsurer"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of insurerDropdown"
                            value="{{ option.id }}"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >LOB<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryProduct">
                          <mat-option
                            *ngFor="let option of insuranceProductsCopy"
                            value="{{ option.lob }}_{{ option.productType }}"
                            >{{ option.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Product Name<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select formControlName="summaryProductName">
                          <mat-option
                            *ngFor="let option of productDropdown"
                            [value]="option.productId"
                          >
                            {{ option.productName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >SP<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summarySP">
                          <mat-option
                            *ngFor="let option of spDropdown"
                            [value]="option.spCode"
                          >
                            {{ option.spName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryStatus">
                          <mat-option
                            *ngFor="let option of statusDropDown"
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Branch Code<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="summaryBranchCode"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Lead Generator<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select formControlName="summaryLgCode">
                          <mat-option> </mat-option>
                          <mat-option
                            *ngFor="let option of lgDropDown"
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="loggedIn">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Application No<span
                            *ngIf="firstFormGroup.get('status').value == 2"
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="summaryinsurerApplicationNo"
                          readonly
                        />
                      </mat-form-field>
                    </div>
                    <ng-container *ngIf="optionalField">
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Policy Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summaryPT"
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Premium Paying Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summaryPPT"
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Mode</mat-label>
                          <mat-select formControlName="summarymode">
                            <mat-option
                              *ngFor="let option of modeDropdown"
                              [value]="option.id"
                              >{{ option.value }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Total Premium with GST:</mat-label>
                          <input
                            matInput
                            (keyup)="calculateGST($event.target.value)"
                            class="form-control minimal"
                            formControlName="summarypremiumAmount"
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Base Premium</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summarybasePremium"
                            readonly
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>GST</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summarygst"
                            readonly
                          />
                        </mat-form-field>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="remainingField">
                      <ng-container *ngIf="isIssued">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Number<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyNo"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPT"
                              matInput
                              readonly
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Start Date<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyStartDate"
                              (dateInput)="inputEvent2($event)"
                              matInput
                              [matDatepicker]="dobpicker2"
                              readonly
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker2"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker2></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy End Date<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyEndDate"
                              matInput
                              [matDatepicker]="dobpicker3"
                              readonly
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker3"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker3></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Premium Paying Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPPT"
                              matInput
                              readonly
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Mode<span class="man-field">*</span></mat-label
                            >
                            <mat-select formControlName="summaryMode">
                              <mat-option
                                *ngFor="let option of modeDropdown"
                                [value]="option.id"
                                >{{ option.value }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Total Premium with GST:<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPremiumAmount"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Base Premium<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryBasePremium"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >GST<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryGST"
                            />
                          </mat-form-field>
                        </div>
                      </ng-container>
                      <ng-container *ngIf="!isIssued && !uwStatus">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Remarks<span
                                *ngIf="firstFormGroup.get('status').value == 6"
                                class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryRemarks"
                            />
                          </mat-form-field>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <ng-container *ngIf="showPaymentInfo">
              <div
                class="margin-verticle-20"
                flex
                fxLayout="row wrap"
                fxLayout.xs="column"
                fxLayout.sm="column"
                fxLayoutGap="15px"
              >
                <div fxFlex="20" fxLayoutAlign="start center">
                  <span class="headding">Payment Info</span>
                </div>
                <div
                  fxFlex="76"
                  fxLayoutAlign="end center"
                  (click)="navigateToEditScreen(stepper, 1, 1)"
                >
                  <span class="icon-rounded">
                    <mat-icon
                      class="red-icon"
                      aria-hidden="false"
                      aria-label="Example home icon"
                      >edit</mat-icon
                    >
                  </span>
                </div>
              </div>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div class="margin-top-5" fxFlex="32">
                      <label>Payment Type</label>
                      <mat-radio-group
                        class="display-flex"
                        aria-label="Select an option"
                        formControlName="summarypaymentType"
                      >
                        <ng-container
                          *ngFor="
                            let payment of paymentTypes;
                            let first = first
                          "
                        >
                          <div
                            class="account-type-radio-box"
                            [ngClass]="{ 'margin-left': !first }"
                          >
                            <mat-radio-button
                              (change)="onPaymentMethodChange($event)"
                              [disabled]="
                                (accountDetails === undefined ||
                                  (accountDetails !== undefined &&
                                    accountDetails.length === 0)) &&
                                payment.id === 'DBT'
                              "
                              color="primary"
                              value="{{ payment?.id }}"
                            >
                              {{ payment?.value }}
                            </mat-radio-button>
                          </div>
                        </ng-container>
                      </mat-radio-group>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value === 'DBT'"
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Account Number<span class="man-field">*</span>
                        </mat-label>
                        <mat-select formControlName="summaryaccountNumber">
                          <mat-option
                            *ngFor="let account of accountDetails"
                            [value]="account?.accountNo"
                          >
                            {{ account?.accountNo }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value === 'DBT'"
                    >
                      <mat-form-field
                        class="full-width"
                        color="accent"
                        appearance="fill"
                      >
                        <mat-label
                          >Payment Reference Number(Batch Number/UTR number)
                        </mat-label>
                        <input matInput formControlName="summaryreferenceNo" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          >Cheque Number<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-label
                          *ngIf="paymentForm.get('paymentType').value === 'DD'"
                          >DD Number<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          placeholder="Last 6 digits of the Cheque No."
                          formControlName="summarychequeOrDDNo"
                        />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                    >
                      <mat-form-field
                        class="full-width"
                        color="accent"
                        appearance="fill"
                      >
                        <mat-label
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          >Cheque Date<span class="man-field">*</span>
                        </mat-label>
                        <mat-label
                          *ngIf="paymentForm.get('paymentType').value === 'DD'"
                          >DD Date<span class="man-field">*</span>
                        </mat-label>
                        <input
                          readonly
                          matInput
                          formControlName="summarychkOrDDDate"
                        />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >IFSC Code
                          <span
                            *ngIf="
                              paymentForm.get('paymentType').value === 'CHQ'
                            "
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="summaryifscCode" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >MICR Code
                          <span
                            *ngIf="
                              paymentForm.get('paymentType').value === 'CHQ'
                            "
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="summarymicrCode" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Premium Payable<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          readonly
                          formControlName="summarypremiumPayable"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Name<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          readonly
                          formControlName="summaryinsurerName"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Customer Name<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          readonly
                          formControlName="summarycustomerName"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Date of Payment<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          readonly
                          formControlName="summarydateOfPayment"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Proposer</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 1, 2)"
              >
                <span class="icon-rounded">
                  <mat-icon
                    class="red-icon"
                    aria-hidden="false"
                    aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryTitle">
                          <mat-option
                            *ngFor="let option of titleDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >First Name<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryFirstName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Last Name<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryLastName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Date of Birth<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="summaryDOB" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryGender">
                          <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select formControlName="summaryMaritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Email<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          type="email"
                          formControlName="summaryEmail"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Mobile Number<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="summaryMobile" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>PAN Card</mat-label>
                        <input matInput formControlName="summaryPanNo" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Contact Info</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 2, 3)"
              >
                <span class="icon-rounded">
                  <mat-icon
                    class="red-icon"
                    aria-hidden="false"
                    aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label
                      >Are the Permanent and Mailing address the
                      same?</mat-label
                    >
                    <mat-radio-group
                      formControlName="summaryaddressSame"
                      class="display-flex"
                      aria-label="Select an option"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes"
                          >Yes</mat-radio-button
                        >
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no"
                          >No</mat-radio-button
                        >
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card class="margin-bottom-30">
                <p class="margin-top-30">Permanent Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryPolicyaddressline1"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Address Line 2<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryPolicyaddressline2"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input
                          matInput
                          formControlName="summaryPolicyaddressline3"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Pincode<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryPolicypostalcode"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >City<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryPolicycity" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >State<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryPolicystate" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card
                class="margin-bottom-30"
                *ngIf="thirdFormGroup.get('addressSame').value === 'no'"
              >
                <p class="margin-top-30">Mailing Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryMailingaddressline1"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Address Line 2<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryMailingaddressline2"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input
                          matInput
                          formControlName="summaryMailingaddressline3"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Pincode<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryMailingpostalcode"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >City<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryMailingcity" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >State<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryMailingstate" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <mat-card class="margin-top-20">
              <mat-card-content>
                <span class="headding">DECLARATION</span>
                <br /><br />
                <div>
                  Please read the
                  <span class="terms-link">Terms & Conditions</span>
                  and provide your consent
                </div>
              </mat-card-content>
            </mat-card>
            <mat-card class="margin-top-20">
              <mat-card-content>
                <span class="headding"
                  >The information provided by me in this document is True to
                  the best of my knowledge.</span
                >
                <br /><br />
                <div>
                  This proposal will be the basis of any insurance policy that
                  We may issue. You must disclose all facts relevant to all
                  persons proposed to be insured that may affect Our decision to
                  issue a policy or its price, terms, conditions and exclusions.
                  Non-compliance may result in the avoidance of the Policy. If
                  there is insufficient space for you to provide information
                  whether as requested or otherwise, please attach a separate
                  sheet. If you are in any doubt, please seek the advice of your
                  insurance advisor. We are under no obligation to accept any
                  proposal for insurance. If We accept a proposal for insurance,
                  it shall be subject to the Policy terms and conditions and We
                  shall have no liability to make any payment under the Policy
                  if premium is not received by Us in full and in time, or is
                  not realised or non-fullfillment of pre-policy check-up.
                </div>
              </mat-card-content>
            </mat-card>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>
                Back
              </button>
              <button class="next-btn" mat-button (click)="onSubmitClicked()">
                Submit
              </button>
            </div>
            <div class="spinner-height">
              <p class="submit-error" *ngIf="showSubmitErrorMessage">
                {{ submitErrorMessage }}
              </p>
              <p class="submit-error" *ngIf="showOtpError">
                OTP entered is invalid.
              </p>
            </div>
          </ng-container>
        </form>
      </mat-step>
    </ng-container>
  </mat-horizontal-stepper>
</ng-container>

<ng-container>
  <mat-vertical-stepper
    *ngIf="smallScreen && !errorLoadingApplicationDetails"
    labelPosition="bottom"
    [linear]="true"
    #stepper
  >
    <ng-container>
      <mat-step [stepControl]="firstFormGroup">
        <ng-template matStepLabel>Policy</ng-template>
        <ng-container>
          <form [formGroup]="firstFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="insurer"
                          (selectionChange)="onChanged($event)"
                          [disabled]="makeInputDisable()"
                        >
                          <mat-option
                            *ngFor="let option of insurerDropdown"
                            value="{{ option.id }}"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insurer' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >LOB<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="product"
                          (selectionChange)="onInsurerChanged($event)"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of insuranceProductsCopy"
                            value="{{ option.lob }}_{{ option.productType }}"
                          >
                            {{ option.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'product' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Product Name<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select
                          formControlName="productName"
                          (selectionChange)="onProductSelect($event)"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of productDropdown"
                            [value]="option.productId"
                          >
                            {{ option.productName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'productName' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >SP<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="sp">
                          <mat-option
                            *ngFor="let option of spDropdown"
                            [value]="option.spCode"
                            [disabled]="makeInputDisable()"
                          >
                            {{ option.spName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'sp' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="status"
                          [disabled]="checkStatus()"
                          (selectionChange)="onStatusChange($event)"
                        >
                          <mat-option
                            *ngFor="let option of statusDropDown"
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'status' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Branch Code<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="branchCode"
                          readonly
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'branchCode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Lead Generator<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select
                          formControlName="lgCode"
                          [disabled]="makeInputDisable()"
                          (selectionChange)="onLGChange($event)"
                        >
                          <mat-option>
                            <ngx-mat-select-search
                              placeholderLabel="Search"
                              noEntriesFoundLabel="Not Found"
                              formControlName="searchCtrl1"
                            >
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option
                            *ngFor="
                              let option of lgDropDown
                                | searchDropDown
                                  : firstFormGroup.get('searchCtrl1').value
                                  : 'value'
                            "
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'lgCode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="loggedIn">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Application No<span
                            *ngIf="firstFormGroup.get('status').value == 2"
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="insurerApplicationNo"
                          [disabled]="makeInputDisable()"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insurerApplicationNo' }
                        "
                      >
                      </ng-container>
                    </div>
                    <ng-container *ngIf="optionalField">
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Policy Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="pt"
                            (change)="onPTChanged($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'pt' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Premium Paying Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="ppt"
                            (keyup)="onPPTChanged($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'ppt' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Mode</mat-label>
                          <mat-select formControlName="mode">
                            <mat-option
                              *ngFor="let option of modeDropdown"
                              [value]="option.id"
                              >{{ option.value }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'mode' }
                          "
                        ></ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Total Premium with GST:</mat-label>
                          <input
                            matInput
                            (keyup)="calculateGST($event.target.value)"
                            class="form-control minimal"
                            formControlName="premiumAmount"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'premiumAmount' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Base Premium</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="basePremium"
                            [disabled]="makeInputDisable()"
                            (keyup)="checkBasePremium($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'basePremium' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>GST</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="gst"
                            [disabled]="makeInputDisable()"
                            (keyup)="checkGST($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'gst' }
                          "
                        ></ng-container>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="remainingField">
                      <ng-container *ngIf="isIssued">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Number<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyNo"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyNo' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="pt"
                              (change)="onPTChanged($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'pt' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Policy Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="confirmpt"
                              (keyup)="confirmCheck($event, 1)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmpt' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Start Date<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyStartDate"
                              (dateInput)="inputEvent2($event)"
                              matInput
                              [matDatepicker]="dobpicker2"
                              readonly
                              [min]="past"
                              [max]="currentAndFutureday"
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker2"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker2></mat-datepicker>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyStartDate' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy End Date<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyEndDate"
                              matInput
                              [matDatepicker]="dobpicker3"
                              readonly
                              disabled
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker3"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker3></mat-datepicker>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyEndDate' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Premium Paying Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="ppt"
                              (keyup)="onPPTChanged($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'ppt' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Premium Paying Term<span
                                class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="confirmppt"
                              (keyup)="confirmCheck($event, 2)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmppt' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Mode<span class="man-field">*</span></mat-label
                            >
                            <mat-select formControlName="mode">
                              <mat-option
                                *ngFor="let option of modeDropdown"
                                [value]="option.id"
                                >{{ option.value }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'mode' }
                            "
                          ></ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Total Premium with GST:<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              (keyup)="calculateGST($event.target.value)"
                              class="form-control minimal"
                              formControlName="premiumAmount"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'premiumAmount' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Total Premium with GST:<span
                                class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              (keyup)="confirmCheck($event, 3)"
                              class="form-control minimal"
                              formControlName="confirmpremiumAmount"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmpremiumAmount' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Base Premium<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="basePremium"
                              [disabled]="makeInputDisable()"
                              (keyup)="checkBasePremium($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'basePremium' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >GST<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="gst"
                              [disabled]="makeInputDisable()"
                              (keyup)="checkGST($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'gst' }
                            "
                          ></ng-container>
                        </div>
                      </ng-container>
                      <ng-container
                        *ngIf="
                          !isIssued &&
                          !uwStatus &&
                          firstFormGroup.get('status').value !== 2
                        "
                      >
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Remarks<span
                                *ngIf="firstFormGroup.get('status').value == 6"
                                class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="remarks"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'remarks' }
                            "
                          >
                          </ng-container>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button
                class="next-btn"
                [disabled]="!firstFormGroup.valid"
                mat-button
                (click)="goToNextScreen(stepper, 0)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="paymentForm" *ngIf="showPaymentInfo">
        <ng-template matStepLabel>Payment Info</ng-template>
        <ng-container>
          <form [formGroup]="paymentForm">
            <mat-card class="margin-bottom-30">
              <mat-card-content>
                <div
                  fxLayout="row wrap"
                  fxLayout.xs="column"
                  fxLayout.sm="column"
                  fxLayoutGap="15px"
                >
                  <div class="margin-top-5" fxFlex="32">
                    <label>Payment Type</label><br />
                    <mat-radio-group
                      aria-label="Select an option"
                      formControlName="paymentType"
                    >
                      <ng-container
                        *ngFor="let payment of paymentTypes; let first = first"
                      >
                        <div class="account-type-radio-box" [ngClass]="">
                          <mat-radio-button
                            (change)="onPaymentMethodChange($event)"
                            [disabled]="
                              (accountDetails === undefined ||
                                (accountDetails !== undefined &&
                                  accountDetails.length === 0)) &&
                              payment.id === 'DBT'
                            "
                            color="primary"
                            value="{{ payment?.id }}"
                          >
                            {{ payment?.value }}
                          </mat-radio-button>
                        </div>
                      </ng-container>
                    </mat-radio-group>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
            <mat-card class="margin-bottom-30">
              <mat-card-content>
                <div
                  fxLayout="row wrap"
                  fxLayout.xs="column"
                  fxLayout.sm="column"
                  fxLayoutGap="15px"
                >
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value === 'DBT'"
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Account Number<span class="man-field">*</span>
                      </mat-label>
                      <mat-select formControlName="accountNumber">
                        <mat-option
                          *ngFor="let account of accountDetails"
                          [value]="account?.accountNo"
                        >
                          {{ account?.accountNo }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('accountNumber').touched &&
                        paymentForm.get('accountNumber').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value === 'DBT'"
                  >
                    <mat-form-field
                      class="full-width"
                      color="accent"
                      appearance="fill"
                    >
                      <mat-label
                        >Payment Reference Number(Batch Number/UTR
                        number)</mat-label
                      >
                      <input matInput formControlName="referenceNo" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('referenceNo').touched &&
                        paymentForm.get('referenceNo').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                        >Cheque Number<span class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <mat-label
                        *ngIf="paymentForm.get('paymentType').value === 'DD'"
                        >DD Number<span class="man-field">*</span></mat-label
                      >
                      <input
                        matInput
                        placeholder="Last 6 digits of the Cheque No."
                        formControlName="chequeOrDDNo"
                      />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chequeOrDDNo').touched &&
                        paymentForm.get('chequeOrDDNo').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chequeOrDDNo').touched &&
                        paymentForm.get('chequeOrDDNo').hasError('pattern')
                      "
                      >Please enter a valid Cheque No.</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                  >
                    <mat-form-field
                      class="full-width"
                      color="accent"
                      appearance="fill"
                    >
                      <mat-label
                        *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                        >Cheque Date<span class="man-field">*</span>
                      </mat-label>
                      <mat-label
                        *ngIf="paymentForm.get('paymentType').value === 'DD'"
                        >DD Date<span class="man-field">*</span>
                      </mat-label>
                      <input
                        readonly
                        [min]="threeMonthsBack"
                        [max]="todaysDate"
                        matInput
                        [matDatepicker]="picker"
                        formControlName="chkOrDDDate"
                      />
                      <mat-datepicker-toggle
                        matSuffix
                        [for]="picker"
                      ></mat-datepicker-toggle>
                      <mat-datepicker #picker color="primary"></mat-datepicker>
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chkOrDDDate').touched &&
                        paymentForm.get('chkOrDDDate').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >IFSC Code<span
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput formControlName="ifscCode" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('ifscCode').touched &&
                        paymentForm.get('ifscCode').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('ifscCode').touched &&
                        paymentForm.get('ifscCode').hasError('pattern')
                      "
                      >Please enter a valid IFSC Code</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >MICR Code<span
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput formControlName="micrCode" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('micrCode').touched &&
                        paymentForm.get('micrCode').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('micrCode').touched &&
                        paymentForm.get('micrCode').hasError('pattern')
                      "
                      >Please enter a valid MICR Code</span
                    >
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Premium Payable<span class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input
                        matInput
                        readonly
                        formControlName="premiumPayable"
                      />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Insurer Name<span class="man-field">*</span></mat-label
                      >
                      <input matInput readonly formControlName="insurerName" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Customer Name<span class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput readonly formControlName="customerName" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >Date of Payment<span class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input
                        [min]="threeMonthsBack"
                        [max]="todaysDate"
                        matInput
                        [matDatepicker]="picker"
                        readonly
                        formControlName="dateOfPayment"
                      />
                      <mat-datepicker-toggle
                        matSuffix
                        [for]="picker"
                      ></mat-datepicker-toggle>
                      <mat-datepicker #picker color="primary"></mat-datepicker>
                    </mat-form-field>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>
                Back
              </button>
              <button
                class="next-btn"
                [disabled]="!paymentForm.valid"
                mat-button
                (click)="goToNextScreen(stepper, 1)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup">
        <ng-template matStepLabel>Proposer</ng-template>
        <ng-container *ngIf="showProposer">
          <form [formGroup]="secondFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="title">
                          <mat-option
                            *ngFor="let option of titleDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'title' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >First Name<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="firstName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'firstName' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Last Name<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="lastName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'lastName' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Date of Birth<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="dob"
                          (dateInput)="inputEvent($event)"
                          matInput
                          [matDatepicker]="dobpicker"
                          readonly
                          [min]="MinDate()"
                          [max]="maxAdultDate"
                        />
                        <mat-datepicker-toggle
                          matSuffix
                          [for]="dobpicker"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #dobpicker></mat-datepicker>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'dob' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="gender">
                          <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'gender' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select formControlName="maritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'maritalStatus' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Email<span class="man-field">*</span></mat-label
                        >
                        <input matInput type="email" formControlName="email" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'email' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Mobile Number<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="mobile" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mobile' }
                        "
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>PAN Card</mat-label>
                        <input
                          matInput
                          formControlName="panNo"
                          *ngIf="remainingField"
                          readonly
                        />
                        <input
                          matInput
                          formControlName="panNo"
                          *ngIf="!remainingField"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'panNo' }
                        "
                      ></ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>
                Back
              </button>
              <button
                class="next-btn"
                [disabled]="!secondFormGroup.valid"
                mat-button
                (click)="goToNextScreen(stepper, 1)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="thirdFormGroup">
        <ng-template matStepLabel>Contact Info</ng-template>
        <ng-container *ngIf="showContactInfo">
          <form [formGroup]="thirdFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label
                      >Are the Permanent and Mailing address the
                      same?</mat-label
                    >
                    <mat-radio-group
                      (change)="onRadioChange($event)"
                      class="display-flex"
                      aria-label="Select an option"
                      formControlName="addressSame"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes"
                          >Yes</mat-radio-button
                        >
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no"
                          >No</mat-radio-button
                        >
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card class="margin-bottom-30">
                <p class="margin-top-30">Permanent Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="policyaddressline1" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline1' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Address Line 2<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="policyaddressline2" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline2' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="policyaddressline3" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline3' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Pincode<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="policypostalcode"
                          (keyup)="onPostalCodeChange($event.target.value, 0)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policypostalcode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >City<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="policycity"
                          readonly="makeReadOnly()"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policycity' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >State<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="policystate"
                          readonly
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policystate' }
                        "
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card
                class="margin-bottom-30"
                *ngIf="thirdFormGroup.get('addressSame').value === 'no'"
              >
                <p class="margin-top-30">Mailing Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="mailingaddressline1" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline1' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Address Line 2<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="mailingaddressline2" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline2' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="mailingaddressline3" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline3' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Pincode<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="mailingpostalcode"
                          (keyup)="onPostalCodeChange($event.target.value, 1)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingpostalcode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >City<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="mailingcity"
                          readonly="makeReadOnly()"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingcity' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >State<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="mailingstate"
                          readonly="makeReadOnly()"
                          readonly
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingstate' }
                        "
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>
                Back
              </button>
              <button
                class="next-btn"
                [disabled]="!thirdFormGroup.valid"
                mat-button
                (click)="goToNextScreen(stepper, 2)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Summary</ng-template>
        <form [formGroup]="summaryFormGroup" *ngIf="showSummary">
          <ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Policy</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 0, 0)"
              >
                <span class="icon-rounded">
                  <mat-icon
                    class="red-icon"
                    aria-hidden="false"
                    aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="summaryInsurer"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of insurerDropdown"
                            value="{{ option.id }}"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >LOB<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryProduct">
                          <mat-option
                            *ngFor="let option of insuranceProductsCopy"
                            value="{{ option.lob }}_{{ option.productType }}"
                            >{{ option.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Product Name<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select formControlName="summaryProductName">
                          <mat-option
                            *ngFor="let option of productDropdown"
                            [value]="option.productId"
                          >
                            {{ option.productName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >SP<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summarySP">
                          <mat-option
                            *ngFor="let option of spDropdown"
                            [value]="option.spCode"
                          >
                            {{ option.spName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryStatus">
                          <mat-option
                            *ngFor="let option of statusDropDown"
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Branch Code<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="summaryBranchCode"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Lead Generator<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select formControlName="summaryLgCode">
                          <mat-option> </mat-option>
                          <mat-option
                            *ngFor="let option of lgDropDown"
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="loggedIn">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Application No<span
                            *ngIf="firstFormGroup.get('status').value == 2"
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="summaryinsurerApplicationNo"
                          readonly
                        />
                      </mat-form-field>
                    </div>
                    <ng-container *ngIf="optionalField">
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Policy Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summaryPT"
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Premium Paying Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summaryPPT"
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Mode</mat-label>
                          <mat-select formControlName="summarymode">
                            <mat-option
                              *ngFor="let option of modeDropdown"
                              [value]="option.id"
                              >{{ option.value }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Total Premium with GST:</mat-label>
                          <input
                            matInput
                            (keyup)="calculateGST($event.target.value)"
                            class="form-control minimal"
                            formControlName="summarypremiumAmount"
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Base Premium</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summarybasePremium"
                            readonly
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>GST</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summarygst"
                            readonly
                          />
                        </mat-form-field>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="remainingField">
                      <ng-container *ngIf="isIssued">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Number<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyNo"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPT"
                              matInput
                              readonly
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy Start Date<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyStartDate"
                              (dateInput)="inputEvent2($event)"
                              matInput
                              [matDatepicker]="dobpicker2"
                              readonly
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker2"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker2></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Policy End Date<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyEndDate"
                              matInput
                              [matDatepicker]="dobpicker3"
                              readonly
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker3"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker3></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Premium Paying Term<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPPT"
                              matInput
                              readonly
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Mode<span class="man-field">*</span></mat-label
                            >
                            <mat-select formControlName="summaryMode">
                              <mat-option
                                *ngFor="let option of modeDropdown"
                                [value]="option.id"
                                >{{ option.value }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Total Premium with GST:<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPremiumAmount"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Base Premium<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryBasePremium"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >GST<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryGST"
                            />
                          </mat-form-field>
                        </div>
                      </ng-container>
                      <ng-container *ngIf="!isIssued && !uwStatus">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Remarks<span
                                *ngIf="firstFormGroup.get('status').value == 6"
                                class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryRemarks"
                            />
                          </mat-form-field>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <ng-container *ngIf="showPaymentInfo">
              <div
                class="margin-verticle-20"
                flex
                fxLayout="row wrap"
                fxLayout.xs="column"
                fxLayout.sm="column"
                fxLayoutGap="15px"
              >
                <div fxFlex="20" fxLayoutAlign="start center">
                  <span class="headding">Payment Info</span>
                </div>
                <div
                  fxFlex="76"
                  fxLayoutAlign="end center"
                  (click)="navigateToEditScreen(stepper, 1, 1)"
                >
                  <span class="icon-rounded">
                    <mat-icon
                      class="red-icon"
                      aria-hidden="false"
                      aria-label="Example home icon"
                      >edit</mat-icon
                    >
                  </span>
                </div>
              </div>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div class="margin-top-5" fxFlex="32">
                      <label>Payment Type</label><br />
                      <mat-radio-group
                        aria-label="Select an option"
                        formControlName="summarypaymentType"
                      >
                        <ng-container
                          *ngFor="
                            let payment of paymentTypes;
                            let first = first
                          "
                        >
                          <div class="account-type-radio-box" [ngClass]="">
                            <mat-radio-button
                              (change)="onPaymentMethodChange($event)"
                              [disabled]="
                                (accountDetails === undefined ||
                                  (accountDetails !== undefined &&
                                    accountDetails.length === 0)) &&
                                payment.id === 'DBT'
                              "
                              color="primary"
                              value="{{ payment?.id }}"
                            >
                              {{ payment?.value }}
                            </mat-radio-button>
                          </div>
                        </ng-container>
                      </mat-radio-group>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value === 'DBT'"
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Account Number<span class="man-field">*</span>
                        </mat-label>
                        <mat-select formControlName="summaryaccountNumber">
                          <mat-option
                            *ngFor="let account of accountDetails"
                            [value]="account?.accountNo"
                          >
                            {{ account?.accountNo }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value === 'DBT'"
                    >
                      <mat-form-field
                        class="full-width"
                        color="accent"
                        appearance="fill"
                      >
                        <mat-label
                          >Payment Reference Number(Batch Number/UTR number)
                        </mat-label>
                        <input matInput formControlName="summaryreferenceNo" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          >Cheque Number<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-label
                          *ngIf="paymentForm.get('paymentType').value === 'DD'"
                          >DD Number<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          placeholder="Last 6 digits of the Cheque No."
                          formControlName="summarychequeOrDDNo"
                        />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                    >
                      <mat-form-field
                        class="full-width"
                        color="accent"
                        appearance="fill"
                      >
                        <mat-label
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          >Cheque Date<span class="man-field">*</span>
                        </mat-label>
                        <mat-label
                          *ngIf="paymentForm.get('paymentType').value === 'DD'"
                          >DD Date<span class="man-field">*</span>
                        </mat-label>
                        <input
                          readonly
                          matInput
                          formControlName="summarychkOrDDDate"
                        />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >IFSC Code
                          <span
                            *ngIf="
                              paymentForm.get('paymentType').value === 'CHQ'
                            "
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="summaryifscCode" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="paymentForm.get('paymentType').value !== 'DBT'"
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >MICR Code
                          <span
                            *ngIf="
                              paymentForm.get('paymentType').value === 'CHQ'
                            "
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="summarymicrCode" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Premium Payable<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          readonly
                          formControlName="summarypremiumPayable"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Name<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          readonly
                          formControlName="summaryinsurerName"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Customer Name<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          readonly
                          formControlName="summarycustomerName"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Date of Payment<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          readonly
                          formControlName="summarydateOfPayment"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Proposer</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 1, 2)"
              >
                <span class="icon-rounded">
                  <mat-icon
                    class="red-icon"
                    aria-hidden="false"
                    aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryTitle">
                          <mat-option
                            *ngFor="let option of titleDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >First Name<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryFirstName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Last Name<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryLastName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Date of Birth<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="summaryDOB" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryGender">
                          <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <mat-select formControlName="summaryMaritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Email<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          type="email"
                          formControlName="summaryEmail"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Mobile Number<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input matInput formControlName="summaryMobile" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>PAN Card</mat-label>
                        <input matInput formControlName="summaryPanNo" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Contact Info</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 2, 3)"
              >
                <span class="icon-rounded">
                  <mat-icon
                    class="red-icon"
                    aria-hidden="false"
                    aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label
                      >Are the Permanent and Mailing address the
                      same?</mat-label
                    >
                    <mat-radio-group
                      formControlName="summaryaddressSame"
                      class="display-flex"
                      aria-label="Select an option"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes"
                          >Yes</mat-radio-button
                        >
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no"
                          >No</mat-radio-button
                        >
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card class="margin-bottom-30">
                <p class="margin-top-30">Permanent Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryPolicyaddressline1"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Address Line 2<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryPolicyaddressline2"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input
                          matInput
                          formControlName="summaryPolicyaddressline3"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Pincode<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryPolicypostalcode"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >City<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryPolicycity" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >State<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryPolicystate" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card
                class="margin-bottom-30"
                *ngIf="thirdFormGroup.get('addressSame').value === 'no'"
              >
                <p class="margin-top-30">Mailing Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryMailingaddressline1"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Address Line 2<span class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryMailingaddressline2"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input
                          matInput
                          formControlName="summaryMailingaddressline3"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Pincode<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          formControlName="summaryMailingpostalcode"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >City<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryMailingcity" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >State<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryMailingstate" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <mat-card class="margin-top-20">
              <mat-card-content>
                <span class="headding">DECLARATION</span>
                <br /><br />
                <div>
                  Please read the
                  <span class="terms-link">Terms & Conditions</span>
                  and provide your consent
                </div>
              </mat-card-content>
            </mat-card>
            <mat-card class="margin-top-20">
              <mat-card-content>
                <span class="headding"
                  >The information provided by me in this document is True to
                  the best of my knowledge.</span
                >
                <br /><br />
                <div>
                  This proposal will be the basis of any insurance policy that
                  We may issue. You must disclose all facts relevant to all
                  persons proposed to be insured that may affect Our decision to
                  issue a policy or its price, terms, conditions and exclusions.
                  Non-compliance may result in the avoidance of the Policy. If
                  there is insufficient space for you to provide information
                  whether as requested or otherwise, please attach a separate
                  sheet. If you are in any doubt, please seek the advice of your
                  insurance advisor. We are under no obligation to accept any
                  proposal for insurance. If We accept a proposal for insurance,
                  it shall be subject to the Policy terms and conditions and We
                  shall have no liability to make any payment under the Policy
                  if premium is not received by Us in full and in time, or is
                  not realised or non-fullfillment of pre-policy check-up.
                </div>
              </mat-card-content>
            </mat-card>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>
                Back
              </button>
              <button class="next-btn" mat-button (click)="onSubmitClicked()">
                Submit
              </button>
            </div>
            <div class="spinner-height">
              <p class="submit-error" *ngIf="showSubmitErrorMessage">
                {{ submitErrorMessage }}
              </p>
              <p class="submit-error" *ngIf="showOtpError">
                OTP entered is invalid.
              </p>
            </div>
          </ng-container>
        </form>
      </mat-step>
    </ng-container>
  </mat-vertical-stepper>
</ng-container>

<ng-template #customerErrorTemplate let-key="key">
  <div class="validation-container">
    <ng-container *ngFor="let validation of validationMessages[key]">
      <div
        *ngIf="
          firstFormGroup.get(key)?.hasError(validation.type) &&
          (firstFormGroup.get(key)?.dirty || firstFormGroup.get(key)?.touched)
        "
        class="invalid-feedback"
      >
        {{ validation.message }}
      </div>
      <div
        *ngIf="
          secondFormGroup?.get(key)?.hasError(validation.type) &&
          (secondFormGroup?.get(key)?.dirty ||
            secondFormGroup?.get(key)?.touched)
        "
        class="invalid-feedback"
      >
        {{ validation.message }}
      </div>
      <div
        *ngIf="
          thirdFormGroup?.get(key)?.hasError(validation.type) &&
          (thirdFormGroup?.get(key)?.dirty || thirdFormGroup?.get(key)?.touched)
        "
        class="invalid-feedback"
      >
        {{ validation.message }}
      </div>
    </ng-container>
  </div>
</ng-template>
