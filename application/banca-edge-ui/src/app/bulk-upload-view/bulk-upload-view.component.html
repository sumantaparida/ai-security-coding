<div class="main-container">
  <div *ngIf="media.isActive('md') || media.isActive('lg')" fxLayout="column" fxLayoutGap="0.5%">
    <div fxFlex="100" fxLayout="row" fxLayoutAlign="space-around center" class="filterrow1">
      <div fxFlex="30">
        <span class="material-icons style-icon-policy"> view_list </span>
        <span class="font-size-20">Bulk Upload Reports</span>
      </div>
      <div><span class="font-size-20">Filter By:</span></div>
      <div fxFlex="30">
        <label>Available Banks</label>
        <form [formGroup]="searchForm">
          <mat-form-field appearance="outline" class="pending-btn">
            <mat-label>Filter by Banks</mat-label>
            <mat-select formControlName="filterByBank" (selectionChange)="onSearchFieldChange()">
              <mat-option value="">Select</mat-option>
              <mat-option *ngFor="let insurer of banksForFilter" [value]="insurer.id">
                {{ insurer.value }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </form>
      </div>
      <div fxFlex="30">
        <label>Available Products</label>
        <form [formGroup]="searchForm">
          <mat-form-field appearance="outline" class="inforce-btn">
            <mat-label>Filter by Products</mat-label>
            <mat-select formControlName="filterByProduct" (selectionChange)="onSearchFieldChange()">
              <mat-option value="">Select</mat-option>
              <mat-option *ngFor="let product of productsForFilter" [value]="product.documentKey">
                {{ product.documentName }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </form>
      </div>
      <!-- <div class="transform" fxFlex="40">
            <form class="example-form" [formGroup]="searchForm">
              <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>{{ "component.SEARCH" | translate }}</mat-label>
                <input
                  matInput
                  (keyup)="onSearchFieldChange()"
                  formControlName="searchField"
                />
                <mat-icon matSuffix color="primary">search</mat-icon>
              </mat-form-field>
            </form>
          </div> -->
    </div>

    <div fxFlex="100" fxLayout="row" fxLayoutAlign="space-around center" class="filterrow2">
      <!-- <div fxFlex="20">
            <label>Available Products</label>
            <form [formGroup]="searchForm">
              <mat-form-field appearance="outline" class="inforce-btn">
                <mat-label>Filter by Products</mat-label>
                <mat-select
                  formControlName="filterByProduct"
                  (selectionChange)="onSearchFieldChange()"
                >
                  <mat-option value="">Select</mat-option>
                  <mat-option
                    *ngFor="let product of productsForFilter"
                    [value]="product.id"
                  >
                    {{ product.value }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </form>
          </div> -->

      <!-- <div fxFlex="20">
            <label>Policy Status</label>
            <form [formGroup]="searchForm">
              <mat-form-field appearance="outline" class="inactive-btn">
                <mat-label>Filter by Policy Status</mat-label>
                <mat-select
                  formControlName="filterByStatus"
                  (selectionChange)="onSearchFieldChange()"
                >
                  <mat-option value="">Select</mat-option>
                  <mat-option
                    *ngFor="let policy of policyStatusForFilter"
                    [value]="policy.value"
                  >
                    {{ policy.value }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </form>
          </div> -->
      <!-- <div fxLayout="column" class="filterDate" fxFlex="40">
            <label>Start Date</label>
            <mat-form-field appearance="fill" [formGroup]="searchForm">
              <mat-label>Enter start Date</mat-label>
              <input
                matInput
                [matDatepicker]="picker"
                formControlName="filterByDateStart"
                (dateChange)="onSearchFieldChange()"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div> -->
      <!-- <div fxLayout="column" class="filterDate" fxFlex="40">
            <label>End Date</label>
            <mat-form-field appearance="fill" [formGroup]="searchForm">
              <mat-label>Enter End Date</mat-label>
              <input
                matInput
                [min]="minDate"
                [matDatepicker]="picker1"
                formControlName="filterByDateEnd"
                (dateChange)="onSearchFieldChange()"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker1"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
            </mat-form-field>
          </div> -->
    </div>

    <!-- <button
            mat-raised-button
            color="primary"
            class="pending-btn"
            matBadgeOverlap="true"
            matBadge="{{ initiatedStatusCount }}"
            matBadgeColor="accent"
          >
            {{ "component.OTHERS" | translate }}
          </button> -->
  </div>
  <!-- --mobile-  -->
  <ng-container *ngIf="media.isActive('xs') || media.isActive('sm')">
    <div flex fxLayout="row" fxLayoutGap="5px" class="parent">
      <div fxFlex="50" class="child-one">
        <span class="material-icons style-icon-policy"> kitchen </span
        ><span class="font-size-20">Bulk Upload Reports</span>
      </div>
    </div>
    <div fxFlex="30">
      <label>Available Banks</label>
      <form [formGroup]="searchForm">
        <mat-form-field appearance="outline" class="pending-btn">
          <mat-label>Filter by Banks</mat-label>
          <mat-select formControlName="filterByBank" (selectionChange)="onSearchFieldChange()">
            <mat-option value="">Select</mat-option>
            <mat-option *ngFor="let insurer of banksForFilter" [value]="insurer.id">
              {{ insurer.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </form>
    </div>
    <div fxFlex="30">
      <label>Available Products</label>
      <form [formGroup]="searchForm">
        <mat-form-field appearance="outline" class="inforce-btn">
          <mat-label>Filter by Products</mat-label>
          <mat-select formControlName="filterByProduct" (selectionChange)="onSearchFieldChange()">
            <mat-option value="">Select</mat-option>
            <mat-option *ngFor="let product of productsForFilter" [value]="product.documentKey">
              {{ product.documentName }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </form>
    </div>

    <div flex fxLayout="row" fxLayoutGap="5px" class="parent-search">
      <!-- <div fxFlex="100" class="mob-search">
            <form class="example-form" [formGroup]="searchForm">
              <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>{{ "component.SEARCH" | translate }}</mat-label>
                <input
                  matInput
                  (keyup)="onSearchFieldChange()"
                  formControlName="searchField"
                />
                <mat-icon matSuffix color="primary">search</mat-icon>
              </mat-form-field>
            </form>
          </div> -->
    </div>
  </ng-container>

  <div class="overflow-table">
    <table
      mat-table
      class="mat-elevation-z8"
      [dataSource]="policyApplicationArrCopy"
      matSort
      (matSortChange)="sortData($event, false)"
      multiTemplateDataRows
    >
      <!---- table headers--  -->

      <!-- <ng-container *ngIf="media.isActive('sm') || media.isActive('md') || media.isActive('lg')"> -->
      <div matColumnDef="{{ column }}" *ngFor="let column of displayedColumns; let index = index">
        <th
          class="center"
          [ngClass]="{
            'theme-table-red': currentUser?.organizationCode === 'SIB',
            'theme-table-purple': currentUser?.organizationCode !== 'SIB'
          }"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header="{{ column }}"
          color="primary"
        >
          <span *ngIf="column === 'File Name'">File Name</span>
          <span *ngIf="column === 'Product Name'">Product Name</span>
          <!-- <span *ngIf="column === 'Bank Name'">Bank Name</span> -->
          <span *ngIf="column === 'Uploaded ON'">Uploaded On</span>
          <span *ngIf="column === 'Processed On'">Processed On</span>
          <span *ngIf="column === 'Status'">Status</span>
          <span *ngIf="column === 'Total Records'">Total Records</span>
          <span *ngIf="column === 'Failed Count'">Failed Count</span>
          <!-- <span *ngIf="column === 'Success Report'">Success Report</span> -->
          <span *ngIf="column === 'Error Report'">Error Report</span>
        </th>

        <td mat-cell *matCellDef="let element">
          <span class="padding-left" *ngIf="column === 'File Name'">{{ element.fileName }}</span>
          <span class="padding-left" *ngIf="column === 'Product Name'">{{
            element.documentName
          }}</span>
          <!-- <span class="padding-left" *ngIf="column === 'Bank Name'">{{
                element.orgCode
              }}</span> -->
          <span class="padding-left" *ngIf="column === 'Uploaded ON'">
            {{ element.createdDate }}
          </span>
          <span class="padding-left" *ngIf="column === 'Processed On'">{{
            element.processingDate
          }}</span>
          <span
            class="padding-left"
            *ngIf="column === 'Status' && element.processingStatusCode === 1"
            >Uploaded</span
          >
          <span
            class="padding-left"
            *ngIf="column === 'Status' && element.processingStatusCode === 2"
            >Processing</span
          >
          <span
            class="padding-left"
            *ngIf="column === 'Status' && element.processingStatusCode === 3"
            >Completed</span
          >
          <span
            class="padding-left"
            *ngIf="column === 'Status' && element.processingStatusCode === 4"
            >Scheduled</span
          >
          <span class="padding-left" *ngIf="column === 'Total Records'">{{
            element.totalRecords
          }}</span>
          <span class="padding-left" *ngIf="column === 'Failed Count'">{{
            element.errorRecords
          }}</span>
          <!-- 
          <span class="padding-left" *ngIf="column === 'Success Report'">
            <button
              mat-icon-button
              *ngIf="element.processingStatusCode === 3 && element.validRecords > 0"
              (click)="downloadReport(element?.orgCode, element?.successDocumentUrl)"
            >
              <mat-icon> cloud_download </mat-icon>
            </button>
          </span> -->

          <span class="padding-left" *ngIf="column === 'Error Report'">
            <button
              mat-icon-button
              *ngIf="element.processingStatusCode === 3 && element.errorRecords > 0"
              (click)="downloadReport(element?.id)"
            >
              <mat-icon> cloud_download </mat-icon>
            </button>
          </span>
        </td>
      </div>

      <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columnsToDisplay -->
      <ng-container matColumnDef="expandedDetail">
        <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
          <div
            class="example-element-detail"
            [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'"
          ></div>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let element; columns: displayedColumns"
        class="example-element-row"
        [class.example-expanded-row]="expandedElement === element"
        (click)="expandedElement = expandedElement === element ? null : element"
      ></tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
    </table>
    <mat-paginator
      [length]="policyApplicationSearchCopy?.length"
      [pageSize]="pageSize"
      [pageSizeOptions]="pageSizeOptions"
      (page)="onPageChange($event)"
    >
    </mat-paginator>
  </div>
</div>
