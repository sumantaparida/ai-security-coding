<div class="application-error-display" *ngIf="errorLoadingApplicationDetails">
  <span class="submit-error">{{ errorMessage }}</span>
</div>
<ng-container>
  <mat-horizontal-stepper
    *ngIf="!smallScreen && !errorLoadingApplicationDetails"
    labelPosition="bottom"
    [linear]="true"
    #stepper
  >
    <ng-container>
      <mat-step [stepControl]="firstFormGroup">
        <ng-template matStepLabel *ngIf="!customerConsent">Policy</ng-template>
        <ng-container>
          <form [formGroup]="firstFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <!-- <input type="file" (change)="imageResize($event)" /> -->
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Insurer<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="insurer"
                          (selectionChange)="onChanged($event)"
                          [disabled]="makeInputDisable()"
                        >
                          <mat-option
                            *ngFor="let option of insurerDropdown"
                            value="{{ option.id }}"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insurer' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>{{ lobLabel }}<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="product"
                          (selectionChange)="onInsurerChanged($event)"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of insuranceProductsCopy"
                            value="{{ option.lob }}_{{ option.productType }}"
                          >
                            {{ option.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'product' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Product Name<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="productName"
                          (selectionChange)="onProductSelect($event)"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of productDropdown"
                            [value]="option.productId"
                          >
                            {{ option.productName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'productName' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>SP<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="sp" (selectionChange)="onSpChange($event)">
                          <mat-option
                            *ngFor="let option of spDropdown"
                            [value]="option.spCode"
                            [disabled]="makeInputDisable()"
                          >
                            {{ option.spName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'sp' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Status<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="status"
                          [disabled]="checkStatus()"
                          (selectionChange)="onStatusChange($event)"
                        >
                          <mat-option *ngFor="let option of statusDropDown" [value]="+option.id">
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'status' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Branch Code<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="branchCode"
                          readonly
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'branchCode' }"
                      >
                      </ng-container>
                    </div>
                    <div *ngIf="!flsNotRequired" fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>FLS<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="fls" [disabled]="makeInputDisable2()">
                          <mat-option *ngFor="let option of flsDropDown" value="{{ option.id }}">
                            {{ option.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label *ngIf="orgCode === 'DCB'">Buddy</mat-label>
                        <mat-label *ngIf="orgCode !== 'DCB'"
                          >Lead Generator<span class="man-field">*</span></mat-label
                        >

                        <mat-select
                          formControlName="lgCode"
                          [disabled]="makeInputDisable()"
                          (selectionChange)="onLGChange($event)"
                        >
                          <mat-option>
                            <ngx-mat-select-search
                              placeholderLabel="Search"
                              noEntriesFoundLabel="Not Found"
                              formControlName="searchCtrl1"
                            >
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option
                            *ngFor="
                              let option of lgDropDown
                                | searchDropDown: firstFormGroup.get('searchCtrl1').value:'value'
                            "
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'lgCode' }"
                      >
                      </ng-container>
                    </div>

                    <!-- ---Od & Tp ---  -->

                    <div fxFlex="32" *ngIf="isOdFields">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>OD </mat-label>
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="od"
                          (change)="onPTChanged($event.target.value)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'pt' }"
                      >
                      </ng-container>
                    </div>

                    <div fxFlex="32" *ngIf="isOdFields">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>TP </mat-label>
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="tp"
                          (change)="onPTChanged($event.target.value)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'pt' }"
                      >
                      </ng-container>
                    </div>
                    <!-- ----  -->
                    <div fxFlex="32" *ngIf="loggedIn && !customerConsent">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Application No<span
                            *ngIf="firstFormGroup.get('status').value == 2 || (isCsbUser && firstFormGroup.get('status').value == 9)"
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="insurerApplicationNo"
                          [disabled]="makeInputDisable()"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insurerApplicationNo' }
                        "
                      >
                      </ng-container>
                    </div>
                    <!-- --Sum assured --  -->
                    <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Sum Assured<span *ngIf="isSumAssured" class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          type="number"
                          class="form-control minimal"
                          formControlName="sumAssured"
                          (keypress)="omitCharE($event)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'sumAssured' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="onlySib">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Total Premium with GST:<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          type="number"
                          class="form-control minimal"
                          formControlName="premiumAmount"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'premiumAmount' }"
                      >
                      </ng-container>
                    </div>

                    <ng-container *ngIf="optionalField">
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label
                            >{{ modeLable
                            }}<span *ngIf="isBom" class="man-field">*</span></mat-label
                          >
                          <mat-select
                            formControlName="mode"
                            (selectionChange)="modeSelected($event)"
                          >
                            <mat-option *ngFor="let option of modeDropdown" [value]="option.id"
                              >{{ option.value }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mode' }"
                        >
                        </ng-container>
                      </div>

                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label
                            >Policy Term <span *ngIf="isBom" class="man-field">*</span>
                          </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="pt"
                            (change)="onPTChanged($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'pt' }"
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32" *ngIf="!isSingleMode">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label
                            >{{ pptLabel }}
                            <span *ngIf="isBom" class="man-field">*</span></mat-label
                          >
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="ppt"
                            (keyup)="onPPTChanged($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'ppt' }"
                        >
                        </ng-container>
                      </div>

                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label
                            >Total Premium with GST:
                            <span *ngIf="isBom" class="man-field">*</span></mat-label
                          >
                          <input
                            matInput
                            type="number"
                            (keyup)="calculateGST($event.target.value)"
                            (keypress)="omitCharE($event)"
                            class="form-control minimal"
                            formControlName="premiumAmount"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'premiumAmount' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label
                            >Base Premium <span *ngIf="isBom" class="man-field">*</span></mat-label
                          >
                          <input
                            matInput
                            class="form-control minimal"
                            type="number"
                            formControlName="basePremium"
                            (keyup)="checkBasePremium($event.target.value)"
                            (keypress)="omitCharE($event)"
                            [disabled]="disablePremium()"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'basePremium' }"
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>GST<span *ngIf="isBom" class="man-field">*</span></mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="gst"
                            readonly
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'gst' }"
                        ></ng-container>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="remainingField">
                      <ng-container *ngIf="isIssued">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Number<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyNo"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'policyNo' }"
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Term<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="pt"
                              (change)="onPTChanged($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'pt' }"
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Policy Term<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="confirmpt"
                              (keyup)="confirmCheck($event, 1)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'confirmpt' }"
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Start Date<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyStartDate"
                              (dateInput)="inputEvent2($event)"
                              matInput
                              [matDatepicker]="dobpicker2"
                              readonly
                              [min]="past"
                              [max]="currentAndFutureday"
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker2"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker2></mat-datepicker>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyStartDate' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy End Date<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyEndDate"
                              matInput
                              [matDatepicker]="dobpicker3"
                              readonly
                              disabled
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker3"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker3></mat-datepicker>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyEndDate' }
                            "
                          >
                          </ng-container>
                        </div>

                        <!-- mode --  -->

                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>{{ modeLable }}<span class="man-field">*</span></mat-label>
                            <mat-select
                              formControlName="mode"
                              (selectionChange)="modeSelected($event)"
                            >
                              <mat-option *ngFor="let option of modeDropdown" [value]="option.id"
                                >{{ option.value }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mode' }"
                          >
                          </ng-container>
                        </div>

                        <div fxFlex="32" *ngIf="!isSingleMode">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>{{ pptLabel }}<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="ppt"
                              (keyup)="onPPTChanged($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'ppt' }"
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32" *ngIf="!isSingleMode">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >{{ confirmPptLabel }}<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="confirmppt"
                              (keyup)="confirmCheck($event, 2)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmppt' }
                            "
                          >
                          </ng-container>
                        </div>

                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Total Premium with GST:<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              type="number"
                              (keyup)="calculateGST($event.target.value)"
                              (keypress)="omitCharE($event)"
                              class="form-control minimal"
                              formControlName="premiumAmount"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'premiumAmount' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Total Premium with GST:<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              (keyup)="confirmCheck($event, 3)"
                              class="form-control minimal"
                              formControlName="confirmpremiumAmount"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmpremiumAmount' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Base Premium<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              type="number"
                              formControlName="basePremium"
                              [disabled]="makeInputDisable()"
                              (keypress)="omitCharE($event)"
                              (keyup)="checkBasePremium($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'basePremium' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>GST<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="gst"
                              [disabled]="makeInputDisable()"
                              (keyup)="checkGST($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'gst' }"
                          >
                          </ng-container>
                        </div>
                      </ng-container>
                      <ng-container
                        *ngIf="
                          firstFormGroup.get('status').value !== 1 &&
                          firstFormGroup.get('status').value !== 24
                        "
                      >
                        <div fxFlex="32" *ngIf="showRemarks">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Remarks<span *ngIf="remarksAshtrix()" class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="remarks"
                              [disabled]="makeInputDisable()"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'remarks' }"
                          >
                          </ng-container>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>

            <div class="text-align-right margin-top-30">
              <button
                class="next-btn"
                [disabled]="firstFormGroupValid()"
                mat-button
                (click)="goToNextScreen(stepper, 0)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="paymentForm" *ngIf="showPaymentInfo">
        <ng-template matStepLabel>Payment Info</ng-template>
        <ng-container>
          <form [formGroup]="paymentForm">
            <mat-card class="margin-bottom-30">
              <mat-card-content>
                <div
                  fxLayout="row wrap"
                  fxLayout.xs="column"
                  fxLayout.sm="column"
                  fxLayoutGap="15px"
                >
                  <div class="margin-top-5" fxFlex="32">
                    <label>Payment Type</label>
                    <mat-radio-group
                      class="display-flex"
                      aria-label="Select an option"
                      formControlName="paymentType"
                    >
                      <ng-container *ngFor="let payment of paymentTypes; let first = first">
                        <div class="account-type-radio-box" [ngClass]="{ 'margin-left': !first }">
                          <mat-radio-button
                            (change)="onPaymentMethodChange($event)"
                            [disabled]="
                              (accountDetails === undefined ||
                                accountDetails === null ||
                                (accountDetails !== undefined &&
                                  accountDetails !== null &&
                                  accountDetails.length === 0)) &&
                              payment.id === 'DBT'
                            "
                            color="primary"
                            value="{{ payment?.id }}"
                          >
                            {{ payment?.value }}
                          </mat-radio-button>
                        </div>
                      </ng-container>
                    </mat-radio-group>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
            <mat-card class="margin-bottom-30">
              <mat-card-content>
                <div
                  fxLayout="row wrap"
                  fxLayout.xs="column"
                  fxLayout.sm="column"
                  fxLayoutGap="15px"
                >
                  <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value === 'DBT'">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Account Number<span class="man-field">*</span> </mat-label>
                      <mat-select formControlName="accountNumber">
                        <mat-option
                          *ngFor="let account of accountDetails"
                          [value]="account?.accountNo"
                        >
                          {{ account?.accountNo }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('accountNumber').touched &&
                        paymentForm.get('accountNumber').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value === 'OP'">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Payment Method<span class="man-field">*</span> </mat-label>
                      <mat-select formControlName="paymentMethod">
                        <mat-option *ngFor="let payment of paymentMethods" [value]="payment?.id">
                          {{ payment?.value }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('paymentType').touched &&
                        paymentForm.get('paymentType').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="
                      paymentForm.get('paymentType').value === 'DBT' ||
                      paymentForm.get('paymentType').value === 'OP'
                    "
                  >
                    <mat-form-field class="full-width" color="accent" appearance="fill">
                      <mat-label>Payment Reference Number(Batch Number/UTR number)</mat-label>
                      <input matInput formControlName="referenceNo" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('referenceNo').touched &&
                        paymentForm.get('referenceNo').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="
                      paymentForm.get('paymentType').value !== 'DBT' &&
                      paymentForm.get('paymentType').value !== 'OP'
                    "
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                        >Cheque Number<span class="man-field">*</span></mat-label
                      >
                      <mat-label *ngIf="paymentForm.get('paymentType').value === 'DD'"
                        >{{ ddNumberLabel }}<span class="man-field">*</span></mat-label
                      >
                      <input
                        matInput
                        placeholder="Last 6 digits of the Cheque No."
                        formControlName="chequeOrDDNo"
                      />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chequeOrDDNo').touched &&
                        paymentForm.get('chequeOrDDNo').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chequeOrDDNo').touched &&
                        paymentForm.get('chequeOrDDNo').hasError('pattern')
                      "
                      >Please enter a valid Cheque No.</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="
                      paymentForm.get('paymentType').value !== 'DBT' &&
                      paymentForm.get('paymentType').value !== 'OP'
                    "
                  >
                    <mat-form-field class="full-width" color="accent" appearance="fill">
                      <mat-label *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                        >Cheque Date<span class="man-field">*</span>
                      </mat-label>
                      <mat-label *ngIf="paymentForm.get('paymentType').value === 'DD'"
                        >{{ ddDateLabel }}<span class="man-field">*</span>
                      </mat-label>
                      <input
                        readonly
                        [min]="threeMonthsBack"
                        [max]="todaysDate"
                        matInput
                        [matDatepicker]="picker"
                        formControlName="chkOrDDDate"
                      />
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker color="primary"></mat-datepicker>
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chkOrDDDate').touched &&
                        paymentForm.get('chkOrDDDate').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="
                      paymentForm.get('paymentType').value !== 'DBT' &&
                      paymentForm.get('paymentType').value !== 'OP'
                    "
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >IFSC Code<span
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput formControlName="ifscCode" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('ifscCode').touched &&
                        paymentForm.get('ifscCode').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('ifscCode').touched &&
                        paymentForm.get('ifscCode').hasError('pattern')
                      "
                      >Please enter a valid IFSC Code</span
                    >
                  </div>
                  <div
                    fxFlex="32"
                    *ngIf="
                      paymentForm.get('paymentType').value !== 'DBT' &&
                      paymentForm.get('paymentType').value !== 'OP'
                    "
                  >
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >MICR Code<span
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput formControlName="micrCode" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('micrCode').touched &&
                        paymentForm.get('micrCode').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('micrCode').touched &&
                        paymentForm.get('micrCode').hasError('pattern')
                      "
                      >Please enter a valid MICR Code</span
                    >
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Premium Payable<span class="man-field">*</span></mat-label>
                      <input matInput readonly formControlName="premiumPayable" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Insurer Name<span class="man-field">*</span></mat-label>
                      <input matInput readonly formControlName="insurerName" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Customer Name<span class="man-field">*</span></mat-label>
                      <input matInput readonly formControlName="customerName" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Date of Payment<span class="man-field">*</span></mat-label>
                      <input
                        [min]="threeMonthsBack"
                        [max]="todaysDate"
                        matInput
                        [matDatepicker]="picker"
                        readonly
                        formControlName="dateOfPayment"
                      />
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker color="primary"></mat-datepicker>
                    </mat-form-field>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>Back</button>
              <button
                class="next-btn"
                [disabled]="!paymentForm.valid"
                mat-button
                (click)="goToNextScreen(stepper, 1)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup">
        <ng-template matStepLabel>Proposer</ng-template>
        <ng-container *ngIf="showProposer">
          <form [formGroup]="secondFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label>Are Proposer and Insured the same?</mat-label>
                    <mat-radio-group
                      class="display-flex"
                      aria-label="SelectonProposerChange an option"
                      formControlName="insured"
                      (change)="onProposerChange($event)"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes">Yes</mat-radio-button>
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no">No</mat-radio-button>
                      </div>
                    </mat-radio-group>
                  </div>
                  <div fxFlex="32" fxFlex.xs="100" *ngIf="askFormC">
                    <mat-label> Is form C applicable? <span class="man-field">*</span> </mat-label>
                    <mat-radio-group
                      class="display-flex"
                      aria-label="SelectonProposerChange an option"
                      formControlName="formCMli"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="true">Yes</mat-radio-button>
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="false">No</mat-radio-button>
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <mat-card class="margin-bottom-30">
                <p class="margin-top-30">Proposer</p>

                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="title">
                          <mat-option *ngFor="let option of titleDropdown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-error> </mat-error>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'title' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label>First Name<span class="man-field">*</span></mat-label>

                        <input matInput formControlName="firstName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'firstName' }"
                      >
                      </ng-container>
                    </div>

                    <div fxFlex="32" *ngIf="!isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label>Organization Name<span class="man-field">*</span></mat-label>

                        <input matInput formControlName="orgName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'firstName' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual && showMiddleName">
                      <mat-form-field appearance="fill">
                        <mat-label>Middle Name</mat-label>
                        <input matInput formControlName="middleName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'middleName' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label>Last Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="lastName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'lastName' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label>Date of Birth<span class="man-field">*</span></mat-label>

                        <input
                          matInput
                          formControlName="dob"
                          (dateInput)="inputEvent($event)"
                          matInput
                          [matDatepicker]="dobpicker"
                          readonly
                          [min]="MinDate()"
                          [max]="maxAdultDate"
                        />
                        <mat-datepicker-toggle matSuffix [for]="dobpicker"></mat-datepicker-toggle>
                        <mat-datepicker #dobpicker></mat-datepicker>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'dob' }"
                      ></ng-container>
                    </div>

                    <div fxFlex="32" *ngIf="!isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label>Date of Incorporation<span class="man-field">*</span></mat-label>

                        <input
                          matInput
                          formControlName="orgIncDate"
                          (dateInput)="inputEvent($event)"
                          matInput
                          [matDatepicker]="dobpicker"
                          readonly
                          [min]="MinDate()"
                          [max]="maxAdultDate"
                        />
                        <mat-datepicker-toggle matSuffix [for]="dobpicker"></mat-datepicker-toggle>
                        <mat-datepicker #dobpicker></mat-datepicker>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'dob' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="gender" disabled>
                          <!-- changing to handle CIB - removing static 
                          <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option>
                          -----  -->
                          <mat-option *ngFor="let option of genderDropDown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'gender' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="maritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'maritalStatus' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Annual Income
                          <span *ngIf="annualIncomeMandatory" class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="annualIncome" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'annualIncome' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Email<span class="man-field">*</span></mat-label>
                        <input matInput type="email" formControlName="email" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'email' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Mobile Number<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="mobile"  />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mobile' }"
                      >
                      </ng-container>
                    </div>
                    <!-- <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field appearance="fill">
                        <mat-label>Alternate Mobile Number</mat-label>
                        <input matInput formControlName="alternateMobile" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'alternateMobile' }
                        "
                      ></ng-container>
                    </div> -->
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >PAN Card <span class="man-field" *ngIf="panMandatory">*</span>
                        </mat-label>
                        <input
                          matInput
                          formControlName="panNo"
                          class="uppercase"
                          *ngIf="panCardReadOnly"
                          readonly
                        />
                        <input
                          matInput
                          formControlName="panNo"
                          class="uppercase"
                          *ngIf="!panCardReadOnly"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'panNo' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual && showLeadTag">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Lead Tag<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="leadTag">
                          <mat-option
                            *ngFor="let option of LeadTagDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'leadTag' }"
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>

              <!-- Insured -->
              <mat-card class="margin-bottom-30" *ngIf="notSame">
                <p class="margin-top-30">Insured</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="insueredtitle"
                          (selectionChange)="onInsuredTitleChange($event)"
                        >
                          <mat-option
                            *ngFor="let option of insuredTitleDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>

                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insueredtitle' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>First Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="insuredFname" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredFname' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Last Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="insuredLname" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredLname' }"
                      >
                      </ng-container>
                    </div>
                    <!-- --relation--  -->

                    <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Relationship to Proposer<span class="man-field">*</span>
                        </mat-label>
                        <mat-select
                          formControlName="relationship"
                          (selectionChange)="onProposerRelationShipChange($event)"
                        >
                          <mat-option
                            *ngFor="let option of proposerRelationShipCopy"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insuredMarritalStatus' }
                        "
                      >
                      </ng-container>
                    </div>

                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Date of Birth<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          formControlName="insuredDob"
                          (dateInput)="inputEvent($event)"
                          matInput
                          [matDatepicker]="dobpicker"
                          readonly
                          [min]="MinDate()"
                          [max]="maxAdultDate"
                        />
                        <mat-datepicker-toggle matSuffix [for]="dobpicker"></mat-datepicker-toggle>
                        <mat-datepicker #dobpicker></mat-datepicker>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredDob' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="insuredGender" onInsure>
                          <mat-option *ngFor="let option of genderDropDown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                          <!-- <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option> -->
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredGender' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="insuredMarritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insuredMarritalStatus' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Email<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="insuredEmail" type="email" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredEmail' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Mobile Number<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="insuredPhone" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredPhone' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>PAN Card</mat-label>
                        <input
                          matInput
                          class="uppercase"
                          formControlName="insuredPan"
                          *ngIf="panCardReadOnly"
                          readonly
                        />
                        <input
                          matInput
                          class="uppercase"
                          formControlName="insuredPan"
                          *ngIf="!panCardReadOnly"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredPan' }"
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <!-- --only dev Physical journey--  -->
              <mat-card class="margin-bottom-30" *ngIf="physicalJourney">
                <p *ngIf="!appNo">Upload Documents</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32" fxFlex.xs="100" *ngIf="!appNo">
                      <!-- <label>Select File</label> -->
                      <input
                        class="color-white"
                        type="file"
                        id="file"
                        formControlName="fileUpload"
                        multiple
                        accept=".png,.jpeg,.pdf,.jpg"
                        (change)="getFileDetails($event)"
                      />

                      <mat-error *ngIf="fileUploadError"
                        >File size should be less than 5MB</mat-error
                      >
                      <ng-container *ngIf="myFiles.length > 0">
                        <p class="green-color">{{ myFiles.length }} Files Uploaded</p>
                        <ng-container *ngFor="let file of displayFileName; let i = index">
                          <span class="word-wrap"> {{ i + 1 }}){{ file }}</span>
                        </ng-container>
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="physicalJourney && !physicalJourneyNonLife">
                      <mat-form-field appearance="fill">
                        <mat-label>Risk Profile Score</mat-label>
                        <input
                          matInput
                          type="number"
                          class="uppercase"
                          [min]="90"
                          [max]="360"
                          formControlName="riskScore"
                          (keyup)="showRiskProfile($event)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'riskScore' }"
                      >
                      </ng-container>
                      <ng-container *ngIf="riskProfile !== ''">
                        <p class="green-color">{{ riskProfile }}</p>
                      </ng-container>
                    </div>

                    <div fxFlex="32" class="txt-center" *ngIf="!physicalJourneyNonLife">
                      <button
                        mat-raised-button
                        color="primary"
                        (click)="openNeedAnalysis()"
                        [disabled]="appNo"
                      >
                        Need Analysis Calculator
                      </button>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>Back</button>
              <button
                class="next-btn"
                [disabled]="secondFormGroup.invalid"
                mat-button
                (click)="goToNextScreen(stepper, 1)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="thirdFormGroup">
        <ng-template matStepLabel>Contact Info</ng-template>
        <ng-container *ngIf="showContactInfo">
          <form [formGroup]="thirdFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label>Are the Permanent and Mailing address the same?</mat-label>
                    <mat-radio-group
                      (change)="onRadioChange($event)"
                      class="display-flex"
                      aria-label="Select an option"
                      formControlName="addressSame"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes">Yes</mat-radio-button>
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no">No</mat-radio-button>
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card class="margin-bottom-30">
                <p class="margin-top-30">Permanent Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="policyaddressline1" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline1' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 2<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="policyaddressline2" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline2' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="policyaddressline3" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline3' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Pincode<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          formControlName="policypostalcode"
                          (keyup)="onPostalCodeChange($event.target.value, 0)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policypostalcode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>City<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="policycity" readonly="makeReadOnly()" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'policycity' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>State<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="policystate" readonly />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'policystate' }"
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card
                class="margin-bottom-30"
                *ngIf="thirdFormGroup.get('addressSame').value === 'no'"
              >
                <p class="margin-top-30">Mailing Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="mailingaddressline1" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline1' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 2<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="mailingaddressline2" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline2' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="mailingaddressline3" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline3' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Pincode<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          formControlName="mailingpostalcode"
                          (keyup)="onPostalCodeChange($event.target.value, 1)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingpostalcode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>City<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="mailingcity" readonly="makeReadOnly()" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mailingcity' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>State<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          formControlName="mailingstate"
                          readonly="makeReadOnly()"
                          readonly
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mailingstate' }"
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>Back</button>
              <button
                class="next-btn"
                [disabled]="thirdFormGroup.invalid"
                mat-button
                (click)="goToNextScreen(stepper, 2)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Summary</ng-template>
        <form [formGroup]="summaryFormGroup" *ngIf="showSummary">
          <ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Policy</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 0, 0)"
              >
                <span class="icon-rounded">
                  <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Insurer<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="summaryInsurer"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of insurerDropdown"
                            value="{{ option.id }}"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>{{ lobLabel }}<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summaryProduct">
                          <mat-option
                            *ngFor="let option of insuranceProductsCopy"
                            value="{{ option.lob }}_{{ option.productType }}"
                            >{{ option.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Product Name<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summaryProductName">
                          <mat-option
                            *ngFor="let option of productDropdown"
                            [value]="option.productId"
                          >
                            {{ option.productName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>SP<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summarySP">
                          <mat-option *ngFor="let option of spDropdown" [value]="option.spCode">
                            {{ option.spName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Status<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summaryStatus">
                          <mat-option *ngFor="let option of statusDropDown" [value]="+option.id">
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Branch Code<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="summaryBranchCode"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="!flsNotRequired">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>FLS<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summaryFls" [disabled]="makeInputDisable2()">
                          <mat-option *ngFor="let option of flsDropDown" value="{{ option.id }}">
                            {{ option.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label *ngIf="orgCode === 'DCB'">Buddy</mat-label>
                        <mat-label *ngIf="orgCode !== 'DCB'"
                          >Lead Generator<span class="man-field">*</span></mat-label
                        >

                        <mat-select formControlName="summaryLgCode">
                          <mat-option> </mat-option>
                          <mat-option *ngFor="let option of lgDropDown" [value]="option.id">
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Sum Assured</mat-label>
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="summarySumAssured"
                          matInput
                          readonly
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="loggedIn">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Application No<span
                            *ngIf="firstFormGroup.get('status').value == 2 || (isCsbUser && firstFormGroup.get('status').value == 9)"
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="summaryinsurerApplicationNo"
                        />
                      </mat-form-field>
                    </div>
                    <ng-container *ngIf="optionalField">
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Policy Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summaryPT"
                            disabled
                            readonly
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32" *ngIf="!isSingleMode">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>{{ pptLabel }}</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summaryPPT"
                            disabled
                            readonly
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>{{ modeLable }}</mat-label>
                          <mat-select formControlName="summarymode">
                            <mat-option *ngFor="let option of modeDropdown" [value]="option.id"
                              >{{ option.value }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Total Premium with GST:</mat-label>
                          <input
                            matInput
                            (keyup)="calculateGST($event.target.value)"
                            class="form-control minimal"
                            formControlName="summarypremiumAmount"
                            disabled
                            readonly
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Base Premium</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summarybasePremium"
                            (keypress)="omitCharE($event)"
                            disabled
                            readonly
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>GST</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summarygst"
                            disabled
                            readonly
                          />
                        </mat-form-field>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="remainingField">
                      <ng-container *ngIf="isIssued">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Number<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyNo"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Term<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPT"
                              matInput
                              readonly
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Start Date<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyStartDate"
                              (dateInput)="inputEvent2($event)"
                              matInput
                              [matDatepicker]="dobpicker2"
                              readonly
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker2"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker2></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy End Date<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyEndDate"
                              matInput
                              [matDatepicker]="dobpicker3"
                              readonly
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker3"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker3></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32" *ngIf="!isSingleMode">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>{{ pptLabel }}<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPPT"
                              matInput
                              disabled
                              readonly
                            />
                          </mat-form-field>
                        </div>

                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>{{ modeLable }}<span class="man-field">*</span></mat-label>
                            <mat-select formControlName="summaryMode">
                              <mat-option *ngFor="let option of modeDropdown" [value]="option.id"
                                >{{ option.value }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Total Premium with GST:<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPremiumAmount"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Base Premium<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryBasePremium"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>GST<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryGST"
                            />
                          </mat-form-field>
                        </div>
                      </ng-container>
                      <ng-container
                        *ngIf="!isIssued && !uwStatus && applicationData?.statusCode !== 24"
                      >
                        <div fxFlex="32" *ngIf="showRemarks">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Remarks<span *ngIf="remarksAshtrix()" class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryRemarks"
                              readonly
                            />
                          </mat-form-field>
                        </div>
                      </ng-container>
                      <ng-container
                        *ngIf="orgCode === 'CSB' && applicationData?.statusCode !== 24"
                      >
                        <div fxFlex="32" *ngIf="showRemarks">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Remarks<span *ngIf="remarksAshtrix()" class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryRemarks"
                              readonly
                            />
                          </mat-form-field>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <ng-container *ngIf="showPaymentInfo">
              <div
                class="margin-verticle-20"
                flex
                fxLayout="row wrap"
                fxLayout.xs="column"
                fxLayout.sm="column"
                fxLayoutGap="15px"
              >
                <div fxFlex="20" fxLayoutAlign="start center">
                  <span class="headding">Payment Info</span>
                </div>
                <div
                  fxFlex="76"
                  fxLayoutAlign="end center"
                  (click)="navigateToEditScreen(stepper, 1, 1)"
                >
                  <span class="icon-rounded">
                    <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                      >edit</mat-icon
                    >
                  </span>
                </div>
              </div>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div class="margin-top-5" fxFlex="32">
                      <label>Payment Type</label>
                      <mat-radio-group
                        class="display-flex"
                        aria-label="Select an option"
                        formControlName="summarypaymentType"
                      >
                        <ng-container *ngFor="let payment of paymentTypes; let first = first">
                          <div class="account-type-radio-box" [ngClass]="{ 'margin-left': !first }">
                            <mat-radio-button
                              (change)="onPaymentMethodChange($event)"
                              [disabled]="
                                (accountDetails === undefined ||
                                  accountDetails === null ||
                                  (accountDetails !== undefined &&
                                    accountDetails !== null &&
                                    accountDetails.length === 0)) &&
                                payment.id === 'DBT'
                              "
                              color="primary"
                              value="{{ payment?.id }}"
                            >
                              {{ payment?.value }}
                            </mat-radio-button>
                          </div>
                        </ng-container>
                      </mat-radio-group>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value === 'DBT'">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Account Number<span class="man-field">*</span> </mat-label>
                        <mat-select formControlName="summaryaccountNumber">
                          <mat-option
                            *ngFor="let account of accountDetails"
                            [value]="account?.accountNo"
                          >
                            {{ account?.accountNo }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value === 'DBT' &&
                        paymentForm.get('paymentType').value === 'OP'
                      "
                    >
                      <mat-form-field class="full-width" color="accent" appearance="fill">
                        <mat-label>Payment Reference Number(Batch Number/UTR number) </mat-label>
                        <input matInput formControlName="summaryreferenceNo" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value !== 'DBT' &&
                        paymentForm.get('paymentType').value !== 'OP'
                      "
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          >Cheque Number<span class="man-field">*</span></mat-label
                        >
                        <mat-label *ngIf="paymentForm.get('paymentType').value === 'DD'"
                          >DD Number<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          placeholder="Last 6 digits of the Cheque No."
                          formControlName="summarychequeOrDDNo"
                        />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value !== 'DBT' &&
                        paymentForm.get('paymentType').value !== 'OP'
                      "
                    >
                      <mat-form-field class="full-width" color="accent" appearance="fill">
                        <mat-label *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          >Cheque Date<span class="man-field">*</span>
                        </mat-label>
                        <mat-label *ngIf="paymentForm.get('paymentType').value === 'DD'"
                          >DD Date<span class="man-field">*</span>
                        </mat-label>
                        <input readonly matInput formControlName="summarychkOrDDDate" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value !== 'DBT' &&
                        paymentForm.get('paymentType').value !== 'OP'
                      "
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >IFSC Code
                          <span
                            *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                            class="man-field"
                            >*</span
                          >
                        </mat-label>
                        <input matInput formControlName="summaryifscCode" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value !== 'DBT' &&
                        paymentForm.get('paymentType').value !== 'OP'
                      "
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >MICR Code
                          <span
                            *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                            class="man-field"
                            >*</span
                          >
                        </mat-label>
                        <input matInput formControlName="summarymicrCode" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Premium Payable<span class="man-field">*</span></mat-label>
                        <input matInput readonly formControlName="summarypremiumPayable" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Insurer Name<span class="man-field">*</span></mat-label>
                        <input matInput readonly formControlName="summaryinsurerName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Customer Name<span class="man-field">*</span></mat-label>
                        <input matInput readonly formControlName="summarycustomerName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Date of Payment<span class="man-field">*</span></mat-label>
                        <input matInput readonly formControlName="summarydateOfPayment" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <!-- Proposer -->
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Proposer</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 1, 2)"
              >
                <span class="icon-rounded">
                  <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label>Are Proposer and Insured the same?</mat-label>
                    <mat-radio-group
                      class="display-flex"
                      aria-label="SelectonProposerChange an option"
                      formControlName="summaryInsured"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes">Yes</mat-radio-button>
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no">No</mat-radio-button>
                      </div>
                    </mat-radio-group>
                  </div>
                  <div fxFlex="32" fxFlex.xs="100" *ngIf="askFormC">
                    <mat-label> Is form C applicable? <span class="man-field">*</span> </mat-label>
                    <mat-radio-group
                      class="display-flex"
                      aria-label="SelectonProposerChange an option"
                      formControlName="summaryFormcMli"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="true">Yes</mat-radio-button>
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="false">No</mat-radio-button>
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryTitle">
                          <mat-option *ngFor="let option of titleDropdown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label>First Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryFirstName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual && showMiddleName">
                      <mat-form-field appearance="fill">
                        <mat-label>Middle Name</mat-label>
                        <input matInput formControlName="summaryMiddleName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label>Last Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryLastName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill" *ngIf="isIndividual">
                        <mat-label>Date of Birth<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryDOB" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryGender">
                          <mat-option *ngFor="let option of genderDropDown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                          <!-- <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option> -->
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryMaritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>

                    <!-- org -->
                    <div fxFlex="32" *ngIf="!isIndividual">
                      <mat-form-field appearance="fill">
                        <mat-label>Organization Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryOrgName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="!isIndividual">
                      <mat-form-field appearance="fill" *ngIf="!isIndividual">
                        <mat-label>Date of Incorporation<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryOrgIncDate" />
                      </mat-form-field>
                    </div>

                    <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Annual Income
                          <span *ngIf="annualIncomeMandatory" class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryAnnualIncome" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Email<span class="man-field">*</span></mat-label>
                        <input matInput type="email" formControlName="summaryEmail" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Mobile Number<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMobile" />
                      </mat-form-field>
                    </div>
                    <!-- <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field appearance="fill">
                        <mat-label>Alternate Mobile Number</mat-label>
                        <input matInput formControlName="summaryAlternateMobile" />
                      </mat-form-field>
                    </div> -->
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >PAN Card <span class="man-field" *ngIf="panMandatory">*</span></mat-label
                        >
                        <input class="uppercase" matInput formControlName="summaryPanNo" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual && showLeadTag">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >Lead tag <span class="man-field">*</span></mat-label
                        >
                        <input class="uppercase" matInput formControlName="summaryLeadTag" />
                      </mat-form-field>
                    </div>
                    
                    <div fxFlex="32" *ngIf="physicalJourney && !physicalJourneyNonLife">
                      <mat-form-field appearance="fill">
                        <mat-label>Risk Profile Score</mat-label>
                        <input class="uppercase" matInput formControlName="summaryRiskScore" />
                      </mat-form-field>
                    </div>
                    <!-- <div fxFlex="32">
                      <mat-label>Uploaded Files</mat-label>
                      <p *ngFor="let name of displayFileName">{{ name }}</p>
                    </div> -->
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>

            <!-- --uploaded files--  -->
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
              *ngIf="physicalJourney"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Uploaded Files</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 1, 2)"
              >
                <span class="icon-rounded">
                  <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <ol>
                <li *ngFor="let name of displayFileName">{{ name }}</li>
              </ol>
            </ng-container>

            <!-- Insured** -->
            <div
              *ngIf="notSame"
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Insured</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 1, 2)"
              >
                <span class="icon-rounded">
                  <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <!-- Insured -->

            <ng-container *ngIf="notSame">
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryInsuredTitle">
                          <mat-option
                            *ngFor="let option of insuredTitleDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>First Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryInsuredFirstName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Last Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryInsuredLastName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Relationship to Proposer<span class="man-field">*</span>
                        </mat-label>
                        <mat-select formControlName="summaryInsuredRelationship">
                          <mat-option
                            *ngFor="let option of proposerRelationShipCopy"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Date of Birth<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryInsuredDOB" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryInsuredGender">
                          <mat-option *ngFor="let option of genderDropDown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                          <!-- <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option> -->
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryInsuredMaritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Email<span class="man-field">*</span></mat-label>
                        <input matInput type="email" formControlName="summaryInsuredEmail" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Mobile Number<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryInsuredMobile" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>PAN Card</mat-label>
                        <input class="uppercase" matInput formControlName="summaryInsuredPanNo" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Contact Info</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 2, 3)"
              >
                <span class="icon-rounded">
                  <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label>Are the Permanent and Mailing address the same?</mat-label>
                    <mat-radio-group
                      formControlName="summaryaddressSame"
                      class="display-flex"
                      aria-label="Select an option"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes">Yes</mat-radio-button>
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no">No</mat-radio-button>
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card class="margin-bottom-30">
                <p class="margin-top-30">Permanent Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryPolicyaddressline1" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 2<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryPolicyaddressline2" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="summaryPolicyaddressline3" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Pincode<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryPolicypostalcode" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>City<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryPolicycity" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>State<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryPolicystate" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card
                class="margin-bottom-30"
                *ngIf="thirdFormGroup.get('addressSame').value === 'no'"
              >
                <p class="margin-top-30">Mailing Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryMailingaddressline1" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 2<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMailingaddressline2" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="summaryMailingaddressline3" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Pincode<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMailingpostalcode" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>City<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMailingcity" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>State<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMailingstate" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <!-- <mat-card class="margin-top-20">
              <mat-card-content>
                <span class="headding">DECLARATION</span>
                <br /><br />
                <div>
                  Please read the
                  <span class="terms-link" (click)="openConsentForm()">Terms & Conditions</span>
                  and provide your consent
                </div>
              </mat-card-content>
            </mat-card> -->

            <mat-card class="margin-top-20" *ngIf="customerConsent">
              <mat-card-content>
                <span class="headding">DECLARATION</span>

                <br />

                <div>
                  <section [formGroup]="checkboxForm">
                    <mat-checkbox
                      class="example-margin"
                      color="primary"
                      formControlName="checkbox1"
                    ></mat-checkbox>

                    I have reviewed the lead form and I agree to share my personal data to
                    {{ applicationData?.insurerName }} to receive personalized assistance tailored
                    to my insurance requirements.

                    <br />
                  </section>
                </div>
              </mat-card-content>
            </mat-card>
            <mat-card class="margin-top-20" *ngIf="orgCode === 'DCB'">
              <mat-card-content>
                <span class="headding">DECLARATION</span>
                <!-- <span class="headding"
                  >The information provided by me in this document is True to the best of my
                  knowledge.</span
                > -->
                <br />
                <div>
                  <section [formGroup]="checkboxForm">
                    <mat-checkbox
                      class="example-margin"
                      color="primary"
                      formControlName="checkbox1"
                    ></mat-checkbox>

                    I hereby declare that I have explained the contents of this application form and
                    have also explained all the important features of the insurance plan. I have
                    explained that the information of the proposer will be sent to respective
                    insurance Company from the Bank's database for pre-population during completion
                    of insurance application, as applicable. I have thereby ensured that the same is
                    completely understood by the life to be assured / proposer and have truthfully
                    recorded the answers provided to me. I further declare that the life to be
                    assured / proposer has signed / affixed his / her thumb impression in my
                    presence (if any).
                    <br />

                    <mat-checkbox
                      class="example-margin"
                      color="primary"
                      formControlName="checkbox2"
                    >
                    </mat-checkbox>

                    I hereby declare that I have personally met the life to be assured / proposer
                    and all statements mentioned are true and correct to the best of my knowledge
                    and belief. I have complied with the Code of Conduct as stated in regulations
                    framed by the Insurance Regulatory and Development Authority of India (IRDAI)
                    and the provisions of my contracts with the Company applicable to the policy to
                    be issued. I have further explained that if any untrue statement(s) /
                    information / response(s) is / are contained herein / including any addendum(s),
                    affidavits, statements, submission furnished / to be furnished, the Company
                    shall have the right to vary the benefits which may be payable and furthermore,
                    if there has been a nondisclosure of any material fact, the policy issued in his
                    / her / their favour pursuant to this proposal may be treated by the Company as
                    null and void.
                  </section>
                </div>
              </mat-card-content>
            </mat-card>

            <div class="text-align-right margin-top-30">
              <ng-container *ngIf="askLeadConverted">
                <label>Converted Lead</label>
                <mat-form-field
                  class="width-6rem"
                  appearance="fill"
                  [formGroup]="miscellaneousForm"
                >
                  <mat-label><span class="man-field">*</span></mat-label>
                  <mat-select formControlName="leadConverted">
                    <mat-option value="Yes"> Yes </mat-option>
                    <mat-option value="No"> No </mat-option>
                  </mat-select>
                </mat-form-field>
              </ng-container>

              <button class="cancel-btn" mat-button matStepperPrevious *ngIf="!customerConsent">
                Back
              </button>
              <button
                *ngIf="showSubmitBtn && !customerConsent"
                class="next-btn"
                mat-button
                [disabled]="disableSubmit()"
                (click)="onSubmitClicked()"
              >
                Submit
              </button>
              <button
                *ngIf="customerConsent && showCIDFOnlyForLife && orgCode == 'DCB'"
                id="blinking-button"
                (click)="getCidf()"
              >
                Open CIDF
              </button>
              <button
                *ngIf="showConsentOption()"
                class="next-btn"
                mat-button
                (click)="submitCustomerConsent(0)"
                [disabled]="makeAcceptDisable()"
              >
                Accept
              </button>
              <button
                *ngIf="showConsentOption()"
                class="cancel-btn"
                mat-button
                (click)="submitCustomerConsent(1)"
                [disabled]="makeAcceptDisable()"
              >
                Reject
              </button>
            </div>
            <div class="spinner-height">
              <p class="submit-error" *ngIf="showSubmitErrorMessage">
                {{ submitErrorMessage }}
              </p>
              <p class="submit-error" *ngIf="showOtpError">OTP entered is invalid.</p>
            </div>
            <div *ngIf="showConsentOption() && orgCode === 'DCB' && showCIDFOnlyForLife" class="font-big">
              Note: Please review CIDF before providing Consent.
            </div>
            <div *ngIf="showConsentOption() && orgCode === 'DCB' && !showCIDFOnlyForLife" class="font-big">
              Note: Please provide your consent to share your data with the insurance company and allow the Relationship Manager (RM) to contact you.
            </div>
            <div
              *ngIf="consentAlreadySubmitted && orgCode === 'DCB'"
              class="font-big"
            >
              Note: Customer Consent already given.
            </div>
          </ng-container>
        </form>
      </mat-step>
    </ng-container>
  </mat-horizontal-stepper>
</ng-container>

<!-- -- smallScreen -- -->
<ng-container>
  <mat-vertical-stepper
    *ngIf="smallScreen && !errorLoadingApplicationDetails"
    labelPosition="bottom"
    [linear]="true"
    #stepper
  >
    <ng-container>
      <mat-step [stepControl]="firstFormGroup">
        <ng-template matStepLabel>Policy</ng-template>
        <ng-container>
          <form [formGroup]="firstFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Insurer<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="insurer"
                          (selectionChange)="onChanged($event)"
                          [disabled]="makeInputDisable()"
                        >
                          <mat-option
                            *ngFor="let option of insurerDropdown"
                            value="{{ option.id }}"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insurer' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>{{ lobLabel }}<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="product"
                          (selectionChange)="onInsurerChanged($event)"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of insuranceProductsCopy"
                            value="{{ option.lob }}_{{ option.productType }}"
                          >
                            {{ option.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'product' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Product Name<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="productName"
                          (selectionChange)="onProductSelect($event)"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of productDropdown"
                            [value]="option.productId"
                          >
                            {{ option.productName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'productName' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>SP<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="sp" (selectionChange)="onSpChange($event)">
                          >
                          <mat-option
                            *ngFor="let option of spDropdown"
                            [value]="option.spCode"
                            [disabled]="makeInputDisable()"
                          >
                            {{ option.spName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'sp' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Status<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="status"
                          [disabled]="checkStatus()"
                          (selectionChange)="onStatusChange($event)"
                        >
                          <mat-option *ngFor="let option of statusDropDown" [value]="+option.id">
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'status' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Branch Code<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="branchCode"
                          readonly
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'branchCode' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="!flsNotRequired">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>FLS<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="fls" [disabled]="makeInputDisable2()">
                          <mat-option *ngFor="let option of flsDropDown" value="{{ option.id }}">
                            {{ option.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label *ngIf="orgCode === 'DCB'">Buddy</mat-label>
                        <mat-label *ngIf="orgCode !== 'DCB'"
                          >Lead Generator<span class="man-field">*</span></mat-label
                        >

                        <mat-select
                          formControlName="lgCode"
                          [disabled]="makeInputDisable()"
                          (selectionChange)="onLGChange($event)"
                        >
                          <mat-option>
                            <ngx-mat-select-search
                              placeholderLabel="Search"
                              noEntriesFoundLabel="Not Found"
                              formControlName="searchCtrl1"
                            >
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option
                            *ngFor="
                              let option of lgDropDown
                                | searchDropDown: firstFormGroup.get('searchCtrl1').value:'value'
                            "
                            [value]="option.id"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'lgCode' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="loggedIn && !customerConsent">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Application No<span
                            *ngIf="firstFormGroup.get('status').value == 2 || (isCsbUser && firstFormGroup.get('status').value == 9)"
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="insurerApplicationNo"
                          [disabled]="makeInputDisable()"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insurerApplicationNo' }
                        "
                      >
                      </ng-container>
                    </div>
                    <ng-container *ngIf="optionalField">
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Policy Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="pt"
                            (change)="onPTChanged($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'pt' }"
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>{{ pptLabel }}</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="ppt"
                            (keyup)="onPPTChanged($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'ppt' }"
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>{{ modeLable }}</mat-label>
                          <mat-select
                            formControlName="mode"
                            (selectionChange)="modeSelected($event)"
                          >
                            <mat-option *ngFor="let option of modeDropdown" [value]="option.id"
                              >{{ option.value }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mode' }"
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Total Premium with GST:</mat-label>
                          <input
                            matInput
                            (keyup)="calculateGST($event.target.value)"
                            class="form-control minimal"
                            type="number"
                            formControlName="premiumAmount"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="
                            customerErrorTemplate;
                            context: { key: 'premiumAmount' }
                          "
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Base Premium</mat-label>
                          <input
                            matInput
                            type="number"
                            class="form-control minimal"
                            formControlName="basePremium"
                            [disabled]="makeInputDisable()"
                            (keyup)="checkBasePremium($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'basePremium' }"
                        >
                        </ng-container>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>GST</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="gst"
                            [disabled]="makeInputDisable()"
                            (keyup)="checkGST($event.target.value)"
                          />
                        </mat-form-field>
                        <ng-container
                          *ngTemplateOutlet="customerErrorTemplate; context: { key: 'gst' }"
                        ></ng-container>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="remainingField">
                      <ng-container *ngIf="isIssued">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Number<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyNo"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'policyNo' }"
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Term<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="pt"
                              (change)="onPTChanged($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'pt' }"
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Policy Term<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="confirmpt"
                              (keyup)="confirmCheck($event, 1)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'confirmpt' }"
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Start Date<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyStartDate"
                              (dateInput)="inputEvent2($event)"
                              matInput
                              [matDatepicker]="dobpicker2"
                              readonly
                              [min]="past"
                              [max]="currentAndFutureday"
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker2"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker2></mat-datepicker>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyStartDate' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy End Date<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="policyEndDate"
                              matInput
                              [matDatepicker]="dobpicker3"
                              readonly
                              disabled
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker3"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker3></mat-datepicker>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'policyEndDate' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>{{ pptLabel }}<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="ppt"
                              (keyup)="onPPTChanged($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'ppt' }"
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >{{ confirmPptLabel }}<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="confirmppt"
                              (keyup)="confirmCheck($event, 2)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmppt' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>{{ modeLable }}<span class="man-field">*</span></mat-label>
                            <mat-select formControlName="mode">
                              <mat-option *ngFor="let option of modeDropdown" [value]="option.id"
                                >{{ option.value }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mode' }"
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Total Premium with GST:<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              (keyup)="calculateGST($event.target.value)"
                              class="form-control minimal"
                              formControlName="premiumAmount"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'premiumAmount' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Confirm Total Premium with GST:<span class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              (keyup)="confirmCheck($event, 3)"
                              class="form-control minimal"
                              formControlName="confirmpremiumAmount"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'confirmpremiumAmount' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Base Premium<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              type="number"
                              formControlName="basePremium"
                              [disabled]="makeInputDisable()"
                              (keyup)="checkBasePremium($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="
                              customerErrorTemplate;
                              context: { key: 'basePremium' }
                            "
                          >
                          </ng-container>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>GST<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="gst"
                              [disabled]="makeInputDisable()"
                              (keyup)="checkGST($event.target.value)"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'gst' }"
                          >
                          </ng-container>
                        </div>
                      </ng-container>

                      <ng-container
                        *ngIf="
                          firstFormGroup.get('status').value !== 1 &&
                          firstFormGroup.get('status').value !== 24
                        "
                      >
                        <div fxFlex="32" *ngIf="showRemarks">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Remarks<span *ngIf="remarksAshtrix()" class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="remarks"
                              [disabled]="makeInputDisable()"
                            />
                          </mat-form-field>
                          <ng-container
                            *ngTemplateOutlet="customerErrorTemplate; context: { key: 'remarks' }"
                          >
                          </ng-container>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button
                class="next-btn"
                [disabled]="!firstFormGroup.valid"
                mat-button
                (click)="goToNextScreen(stepper, 0)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="paymentForm" *ngIf="showPaymentInfo">
        <ng-template matStepLabel>Payment Info</ng-template>
        <ng-container>
          <form [formGroup]="paymentForm">
            <mat-card class="margin-bottom-30">
              <mat-card-content>
                <div
                  fxLayout="row wrap"
                  fxLayout.xs="column"
                  fxLayout.sm="column"
                  fxLayoutGap="15px"
                >
                  <div class="margin-top-5" fxFlex="32">
                    <label>Payment Type</label><br />
                    <mat-radio-group aria-label="Select an option" formControlName="paymentType">
                      <ng-container *ngFor="let payment of paymentTypes; let first = first">
                        <div class="account-type-radio-box" [ngClass]="">
                          <mat-radio-button
                            (change)="onPaymentMethodChange($event)"
                            [disabled]="
                              (accountDetails === undefined ||
                                accountDetails === null ||
                                (accountDetails !== undefined &&
                                  accountDetails !== null &&
                                  accountDetails.length === 0)) &&
                              payment.id === 'DBT'
                            "
                            color="primary"
                            value="{{ payment?.id }}"
                          >
                            {{ payment?.value }}
                          </mat-radio-button>
                        </div>
                      </ng-container>
                    </mat-radio-group>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
            <mat-card class="margin-bottom-30">
              <mat-card-content>
                <div
                  fxLayout="row wrap"
                  fxLayout.xs="column"
                  fxLayout.sm="column"
                  fxLayoutGap="15px"
                >
                  <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value === 'DBT'">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Account Number<span class="man-field">*</span> </mat-label>
                      <mat-select formControlName="accountNumber">
                        <mat-option
                          *ngFor="let account of accountDetails"
                          [value]="account?.accountNo"
                        >
                          {{ account?.accountNo }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('accountNumber').touched &&
                        paymentForm.get('accountNumber').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value === 'DBT'">
                    <mat-form-field class="full-width" color="accent" appearance="fill">
                      <mat-label>Payment Reference Number(Batch Number/UTR number)</mat-label>
                      <input matInput formControlName="referenceNo" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('referenceNo').touched &&
                        paymentForm.get('referenceNo').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value !== 'DBT'">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                        >Cheque Number<span class="man-field">*</span></mat-label
                      >
                      <mat-label *ngIf="paymentForm.get('paymentType').value === 'DD'"
                        >DD Number<span class="man-field">*</span></mat-label
                      >
                      <input
                        matInput
                        placeholder="Last 6 digits of the Cheque No."
                        formControlName="chequeOrDDNo"
                      />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chequeOrDDNo').touched &&
                        paymentForm.get('chequeOrDDNo').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chequeOrDDNo').touched &&
                        paymentForm.get('chequeOrDDNo').hasError('pattern')
                      "
                      >Please enter a valid Cheque No.</span
                    >
                  </div>
                  <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value !== 'DBT'">
                    <mat-form-field class="full-width" color="accent" appearance="fill">
                      <mat-label *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                        >Cheque Date<span class="man-field">*</span>
                      </mat-label>
                      <mat-label *ngIf="paymentForm.get('paymentType').value === 'DD'"
                        >DD Date<span class="man-field">*</span>
                      </mat-label>
                      <input
                        readonly
                        [min]="threeMonthsBack"
                        [max]="todaysDate"
                        matInput
                        [matDatepicker]="picker"
                        formControlName="chkOrDDDate"
                      />
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker color="primary"></mat-datepicker>
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('chkOrDDDate').touched &&
                        paymentForm.get('chkOrDDDate').hasError('required')
                      "
                      >This field is required</span
                    >
                  </div>
                  <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value !== 'DBT'">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >IFSC Code<span
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput formControlName="ifscCode" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('ifscCode').touched &&
                        paymentForm.get('ifscCode').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('ifscCode').touched &&
                        paymentForm.get('ifscCode').hasError('pattern')
                      "
                      >Please enter a valid IFSC Code</span
                    >
                  </div>
                  <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value !== 'DBT'">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label
                        >MICR Code<span
                          *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          class="man-field"
                          >*</span
                        ></mat-label
                      >
                      <input matInput formControlName="micrCode" />
                    </mat-form-field>
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('micrCode').touched &&
                        paymentForm.get('micrCode').hasError('required')
                      "
                      >This field is required</span
                    >
                    <span
                      class="error-message"
                      *ngIf="
                        paymentForm.get('micrCode').touched &&
                        paymentForm.get('micrCode').hasError('pattern')
                      "
                      >Please enter a valid MICR Code</span
                    >
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Premium Payable<span class="man-field">*</span></mat-label>
                      <input matInput readonly formControlName="premiumPayable" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Insurer Name<span class="man-field">*</span></mat-label>
                      <input matInput readonly formControlName="insurerName" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Customer Name<span class="man-field">*</span></mat-label>
                      <input matInput readonly formControlName="customerName" />
                    </mat-form-field>
                  </div>
                  <div fxFlex="32">
                    <mat-form-field class="full-width" appearance="fill">
                      <mat-label>Date of Payment<span class="man-field">*</span></mat-label>
                      <input
                        [min]="threeMonthsBack"
                        [max]="todaysDate"
                        matInput
                        [matDatepicker]="picker"
                        readonly
                        formControlName="dateOfPayment"
                      />
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker color="primary"></mat-datepicker>
                    </mat-form-field>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>Back</button>
              <button
                class="next-btn"
                [disabled]="!paymentForm.valid"
                mat-button
                (click)="goToNextScreen(stepper, 1)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup">
        <ng-template matStepLabel>Proposer</ng-template>
        <ng-container *ngIf="showProposer">
          <form [formGroup]="secondFormGroup">
            <ng-container>
              <!-- LA Pr  -->
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="10px"
                  >
                    <div fxFlex="32" fxFlex.xs="50">
                      <mat-label>Are Proposer and Insured the same?</mat-label>
                      <mat-radio-group
                        class="display-flex"
                        aria-label="SelectonProposerChange an option"
                        formControlName="insured"
                        (change)="onProposerChange($event)"
                      >
                        <div class="contact-radio-box">
                          <mat-radio-button color="primary" value="yes">Yes</mat-radio-button>
                        </div>
                        <div class="contact-radio-box margin-left">
                          <mat-radio-button color="primary" value="no">No</mat-radio-button>
                        </div>
                      </mat-radio-group>
                    </div>
                    <div fxFlex="32" fxFlex.xs="50" *ngIf="askFormC">
                      <mat-label>
                        Is it Form C applicable <span class="man-field">*</span>
                      </mat-label>
                      <mat-radio-group
                        class="display-flex"
                        aria-label="SelectonProposerChange an option"
                        formControlName="formCMli"
                        (change)="formC($event)"
                      >
                        <div class="contact-radio-box">
                          <mat-radio-button color="primary" value="true">Yes</mat-radio-button>
                        </div>
                        <div class="contact-radio-box margin-left">
                          <mat-radio-button color="primary" value="false">No</mat-radio-button>
                        </div>
                      </mat-radio-group>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>

              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="title">
                          <mat-option *ngFor="let option of titleDropdown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'title' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>First Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="firstName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'firstName' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual && showMiddleName">
                      <mat-form-field appearance="fill">
                        <mat-label>Middle Name</mat-label>
                        <input matInput formControlName="middleName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'middleName' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Last Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="lastName" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'lastName' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Date of Birth<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          formControlName="dob"
                          (dateInput)="inputEvent($event)"
                          matInput
                          [matDatepicker]="dobpicker"
                          readonly
                          [min]="MinDate()"
                          [max]="maxAdultDate"
                        />
                        <mat-datepicker-toggle matSuffix [for]="dobpicker"></mat-datepicker-toggle>
                        <mat-datepicker #dobpicker></mat-datepicker>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'dob' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="gender">
                          <mat-option *ngFor="let option of genderDropDown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                          <!-- <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option> -->
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'gender' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="maritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'maritalStatus' }"
                      >
                      </ng-container>
                    </div>

                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Email<span class="man-field">*</span></mat-label>
                        <input matInput type="email" formControlName="email" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'email' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Mobile Number<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="mobile" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mobile' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>PAN Card</mat-label>
                        <input matInput formControlName="panNo" *ngIf="panCardReadOnly" readonly />
                        <input matInput formControlName="panNo" *ngIf="!panCardReadOnly" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'panNo' }"
                      ></ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="isIndividual && showLeadTag">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Lead Tag<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="leadTag">
                          <mat-option
                            *ngFor="let option of LeadTagDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'leadTag' }"
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>

              <!-- Insured -->
              <mat-card class="margin-bottom-30" *ngIf="notSame">
                <p class="margin-top-30">Insured</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select
                          formControlName="insueredtitle"
                          (selectionChange)="onInsuredTitleChange($event)"
                        >
                          <mat-option
                            *ngFor="let option of insuredTitleDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>

                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insueredtitle' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>First Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="insuredFname" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredFname' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Last Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="insuredLname" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredLname' }"
                      >
                      </ng-container>
                    </div>
                    <!-- --relation--  -->

                    <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Relationship to Proposer<span class="man-field">*</span>
                        </mat-label>
                        <mat-select
                          formControlName="relationship"
                          (selectionChange)="onProposerRelationShipChange($event)"
                        >
                          <mat-option
                            *ngFor="let option of proposerRelationShipCopy"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insuredMarritalStatus' }
                        "
                      >
                      </ng-container>
                    </div>

                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Date of Birth<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          formControlName="insuredDob"
                          (dateInput)="inputEvent($event)"
                          matInput
                          [matDatepicker]="dobpicker"
                          readonly
                          [min]="MinDate()"
                          [max]="maxAdultDate"
                        />
                        <mat-datepicker-toggle matSuffix [for]="dobpicker"></mat-datepicker-toggle>
                        <mat-datepicker #dobpicker></mat-datepicker>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredDob' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="insuredGender" onInsure>
                          <mat-option *ngFor="let option of genderDropDown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredGender' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="insuredMarritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'insuredMarritalStatus' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Email<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="insuredEmail" type="email" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredEmail' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Mobile Number<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="insuredPhone" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredPhone' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>PAN Card</mat-label>
                        <input
                          matInput
                          class="uppercase"
                          formControlName="insuredPan"
                          *ngIf="panCardReadOnly"
                          readonly
                        />
                        <input
                          matInput
                          class="uppercase"
                          formControlName="insuredPan"
                          *ngIf="!panCardReadOnly"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'insuredPan' }"
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>

              <mat-card class="margin-bottom-30" *ngIf="physicalJourney">
                <p *ngIf="!appNo">Upload Documents</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32" fxFlex.xs="100" *ngIf="!appNo">
                      <input
                        type="file"
                        id="file"
                        formControlName="fileUpload"
                        multiple
                        accept=".png,.jpeg,.pdf,.jpg"
                        (change)="getFileDetails($event)"
                      />

                      <mat-error *ngIf="fileUploadError"
                        >File size should be less than 5MB</mat-error
                      >
                      <ng-container *ngIf="myFiles.length > 0">
                        <p class="green-color">{{ myFiles.length }} Files Uploaded</p>
                        <ng-container *ngFor="let file of displayFileName; let i = index">
                          <span class="word-wrap"> {{ i + 1 }}){{ file }}</span>
                        </ng-container>
                      </ng-container>
                    </div>
                    <div fxFlex="32" *ngIf="physicalJourney && !physicalJourneyNonLife">
                      <mat-form-field appearance="fill">
                        <mat-label>Risk Profile Score</mat-label>
                        <input
                          matInput
                          type="number"
                          class="uppercase"
                          [min]="90"
                          [max]="360"
                          formControlName="riskScore"
                          (keyup)="showRiskProfile($event)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'riskScore' }"
                      >
                      </ng-container>
                    </div>

                    <ng-container *ngIf="riskProfile !== ''">
                      <p class="green-color">{{ riskProfile }}</p>
                    </ng-container>
                    <div fxFlex="32" class="txt-center" *ngIf="!physicalJourneyNonLife">
                      <button
                        mat-raised-button
                        color="primary"
                        (click)="openNeedAnalysis()"
                        [disabled]="appNo"
                      >
                        Need Analysis Calculator
                      </button>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>

            <!-- --mobile -upload Physical --  -->

            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>Back</button>
              <button
                class="next-btn"
                [disabled]="secondFormGroup.invalid"
                mat-button
                (click)="goToNextScreen(stepper, 1)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step [stepControl]="thirdFormGroup">
        <ng-template matStepLabel>Contact Info</ng-template>
        <ng-container *ngIf="showContactInfo">
          <form [formGroup]="thirdFormGroup">
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label>Are the Permanent and Mailing address the same?</mat-label>
                    <mat-radio-group
                      (change)="onRadioChange($event)"
                      class="display-flex"
                      aria-label="Select an option"
                      formControlName="addressSame"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes">Yes</mat-radio-button>
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no">No</mat-radio-button>
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card class="margin-bottom-30">
                <p class="margin-top-30">Permanent Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="policyaddressline1" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline1' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 2<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="policyaddressline2" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline2' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="policyaddressline3" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policyaddressline3' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Pincode<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          formControlName="policypostalcode"
                          (keyup)="onPostalCodeChange($event.target.value, 0)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'policypostalcode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>City<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="policycity" readonly="makeReadOnly()" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'policycity' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>State<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="policystate" readonly />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'policystate' }"
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card
                class="margin-bottom-30"
                *ngIf="thirdFormGroup.get('addressSame').value === 'no'"
              >
                <p class="margin-top-30">Mailing Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="mailingaddressline1" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline1' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 2<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="mailingaddressline2" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline2' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="mailingaddressline3" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingaddressline3' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Pincode<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          formControlName="mailingpostalcode"
                          (keyup)="onPostalCodeChange($event.target.value, 1)"
                        />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="
                          customerErrorTemplate;
                          context: { key: 'mailingpostalcode' }
                        "
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>City<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="mailingcity" readonly="makeReadOnly()" />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mailingcity' }"
                      >
                      </ng-container>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>State<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="mailingstate" readonly />
                      </mat-form-field>
                      <ng-container
                        *ngTemplateOutlet="customerErrorTemplate; context: { key: 'mailingstate' }"
                      >
                      </ng-container>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div class="text-align-right margin-top-30">
              <button class="cancel-btn" mat-button matStepperPrevious>Back</button>
              <button
                class="next-btn"
                [disabled]="thirdFormGroup.invalid"
                mat-button
                (click)="goToNextScreen(stepper, 2)"
              >
                Next
              </button>
            </div>
          </form>
        </ng-container>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Summary</ng-template>
        <form [formGroup]="summaryFormGroup" *ngIf="showSummary">
          <ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Policy</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 0, 0)"
              >
                <span class="icon-rounded">
                  <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Insurer<span class="man-field">*</span></mat-label>
                        <mat-select
                          formControlName="summaryInsurer"
                          [disabled]="makeInputDisable2()"
                        >
                          <mat-option
                            *ngFor="let option of insurerDropdown"
                            value="{{ option.id }}"
                          >
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>{{ lobLabel }}<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summaryProduct">
                          <mat-option
                            *ngFor="let option of insuranceProductsCopy"
                            value="{{ option.lob }}_{{ option.productType }}"
                            >{{ option.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Product Name<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summaryProductName">
                          <mat-option
                            *ngFor="let option of productDropdown"
                            [value]="option.productId"
                          >
                            {{ option.productName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>SP<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summarySP">
                          <mat-option *ngFor="let option of spDropdown" [value]="option.spCode">
                            {{ option.spName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Status<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summaryStatus">
                          <mat-option *ngFor="let option of statusDropDown" [value]="+option.id">
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Branch Code<span class="man-field">*</span></mat-label>
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="summaryBranchCode"
                        />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="!flsNotRequired">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>FLS<span class="man-field">*</span></mat-label>
                        <mat-select formControlName="summaryFls" [disabled]="makeInputDisable2()">
                          <mat-option *ngFor="let option of flsDropDown" value="{{ option.id }}">
                            {{ option.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label *ngIf="orgCode === 'DCB'">Buddy</mat-label>
                        <mat-label *ngIf="orgCode !== 'DCB'"
                          >Lead Generator<span class="man-field">*</span></mat-label
                        >

                        <mat-select formControlName="summaryLgCode">
                          <mat-option> </mat-option>
                          <mat-option *ngFor="let option of lgDropDown" [value]="option.id">
                            {{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="loggedIn">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >Insurer Application No<span
                            *ngIf="firstFormGroup.get('status').value == 2 || (isCsbUser && firstFormGroup.get('status').value == 9)"
                            class="man-field"
                            >*</span
                          ></mat-label
                        >
                        <input
                          matInput
                          class="form-control minimal"
                          formControlName="summaryinsurerApplicationNo"
                          readonly
                        />
                      </mat-form-field>
                    </div>
                    <ng-container *ngIf="optionalField">
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Policy Term </mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summaryPT"
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32" *ngIf="!isSingleMode">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>{{ pptLabel }}</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summaryPPT"
                            disabled
                            readonly
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>{{ modeLable }}</mat-label>
                          <mat-select formControlName="summarymode">
                            <mat-option *ngFor="let option of modeDropdown" [value]="option.id"
                              >{{ option.value }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Total Premium with GST:</mat-label>
                          <input
                            matInput
                            (keyup)="calculateGST($event.target.value)"
                            class="form-control minimal"
                            formControlName="summarypremiumAmount"
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>Base Premium</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summarybasePremium"
                            readonly
                          />
                        </mat-form-field>
                      </div>
                      <div fxFlex="32">
                        <mat-form-field class="full-width" appearance="fill">
                          <mat-label>GST</mat-label>
                          <input
                            matInput
                            class="form-control minimal"
                            formControlName="summarygst"
                            readonly
                          />
                        </mat-form-field>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="remainingField">
                      <ng-container *ngIf="isIssued">
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Number<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyNo"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Term<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPT"
                              matInput
                              readonly
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy Start Date<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyStartDate"
                              (dateInput)="inputEvent2($event)"
                              matInput
                              [matDatepicker]="dobpicker2"
                              readonly
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker2"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker2></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Policy End Date<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPolicyEndDate"
                              matInput
                              [matDatepicker]="dobpicker3"
                              readonly
                            />
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="dobpicker3"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dobpicker3></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32" *ngIf="!isSingleMode">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>{{ pptLabel }}<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPPT"
                              disabled
                              matInput
                              readonly
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>{{ modeLable }}<span class="man-field">*</span></mat-label>
                            <mat-select formControlName="summaryMode">
                              <mat-option *ngFor="let option of modeDropdown" [value]="option.id"
                                >{{ option.value }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Total Premium with GST:<span class="man-field">*</span></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryPremiumAmount"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Base Premium<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryBasePremium"
                            />
                          </mat-form-field>
                        </div>
                        <div fxFlex="32">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label>GST<span class="man-field">*</span></mat-label>
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryGST"
                            />
                          </mat-form-field>
                        </div>
                      </ng-container>
                      <ng-container
                        *ngIf="!isIssued && !uwStatus && applicationData?.statusCode !== 24"
                      >
                        <div fxFlex="32" *ngIf="showRemarks">
                          <mat-form-field class="full-width" appearance="fill">
                            <mat-label
                              >Remarks<span *ngIf="remarksAshtrix()" class="man-field"
                                >*</span
                              ></mat-label
                            >
                            <input
                              matInput
                              class="form-control minimal"
                              formControlName="summaryRemarks"
                              readonly
                            />
                          </mat-form-field>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <ng-container *ngIf="showPaymentInfo">
              <div
                class="margin-verticle-20"
                flex
                fxLayout="row wrap"
                fxLayout.xs="column"
                fxLayout.sm="column"
                fxLayoutGap="15px"
              >
                <div fxFlex="20" fxLayoutAlign="start center">
                  <span class="headding">Payment Info</span>
                </div>
                <div
                  fxFlex="76"
                  fxLayoutAlign="end center"
                  (click)="navigateToEditScreen(stepper, 1, 1)"
                >
                  <span class="icon-rounded">
                    <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                      >edit</mat-icon
                    >
                  </span>
                </div>
              </div>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div class="margin-top-5" fxFlex="32">
                      <label>Payment Type</label><br />
                      <mat-radio-group
                        aria-label="Select an option"
                        formControlName="summarypaymentType"
                      >
                        <ng-container *ngFor="let payment of paymentTypes; let first = first">
                          <div class="account-type-radio-box" [ngClass]="">
                            <mat-radio-button
                              (change)="onPaymentMethodChange($event)"
                              [disabled]="
                                (accountDetails === undefined ||
                                  accountDetails === null ||
                                  (accountDetails !== undefined &&
                                    accountDetails !== null &&
                                    accountDetails.length === 0)) &&
                                payment.id === 'DBT'
                              "
                              color="primary"
                              value="{{ payment?.id }}"
                            >
                              {{ payment?.value }}
                            </mat-radio-button>
                          </div>
                        </ng-container>
                      </mat-radio-group>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32" *ngIf="paymentForm.get('paymentType').value === 'DBT'">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Account Number<span class="man-field">*</span> </mat-label>
                        <mat-select formControlName="summaryaccountNumber">
                          <mat-option
                            *ngFor="let account of accountDetails"
                            [value]="account?.accountNo"
                          >
                            {{ account?.accountNo }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value === 'DBT' &&
                        paymentForm.get('paymentType').value === 'OP'
                      "
                    >
                      <mat-form-field class="full-width" color="accent" appearance="fill">
                        <mat-label>Payment Reference Number(Batch Number/UTR number) </mat-label>
                        <input matInput formControlName="summaryreferenceNo" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value !== 'DBT' &&
                        paymentForm.get('paymentType').value !== 'OP'
                      "
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          >Cheque Number<span class="man-field">*</span></mat-label
                        >
                        <mat-label *ngIf="paymentForm.get('paymentType').value === 'DD'"
                          >DD Number<span class="man-field">*</span></mat-label
                        >
                        <input
                          matInput
                          placeholder="Last 6 digits of the Cheque No."
                          formControlName="summarychequeOrDDNo"
                        />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value !== 'DBT' &&
                        paymentForm.get('paymentType').value !== 'OP'
                      "
                    >
                      <mat-form-field class="full-width" color="accent" appearance="fill">
                        <mat-label *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                          >Cheque Date<span class="man-field">*</span>
                        </mat-label>
                        <mat-label *ngIf="paymentForm.get('paymentType').value === 'DD'"
                          >DD Date<span class="man-field">*</span>
                        </mat-label>
                        <input readonly matInput formControlName="summarychkOrDDDate" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value !== 'DBT' &&
                        paymentForm.get('paymentType').value !== 'OP'
                      "
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >IFSC Code
                          <span
                            *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                            class="man-field"
                            >*</span
                          >
                        </mat-label>
                        <input matInput formControlName="summaryifscCode" />
                      </mat-form-field>
                    </div>
                    <div
                      fxFlex="32"
                      *ngIf="
                        paymentForm.get('paymentType').value !== 'DBT' &&
                        paymentForm.get('paymentType').value !== 'OP'
                      "
                    >
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label
                          >MICR Code
                          <span
                            *ngIf="paymentForm.get('paymentType').value === 'CHQ'"
                            class="man-field"
                            >*</span
                          >
                        </mat-label>
                        <input matInput formControlName="summarymicrCode" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Premium Payable<span class="man-field">*</span></mat-label>
                        <input matInput readonly formControlName="summarypremiumPayable" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Insurer Name<span class="man-field">*</span></mat-label>
                        <input matInput readonly formControlName="summaryinsurerName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Customer Name<span class="man-field">*</span></mat-label>
                        <input matInput readonly formControlName="summarycustomerName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field class="full-width" appearance="fill">
                        <mat-label>Date of Payment<span class="man-field">*</span></mat-label>
                        <input matInput readonly formControlName="summarydateOfPayment" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Proposer</span>
              </div>
              <!-- <mat-card class="margin-bottom-30">
                <mat-card-content> -->
              <div fxFlex="32" fxFlex.xs="50">
                <mat-label>Are Proposer and Insured the same?</mat-label>
                <mat-radio-group
                  class="display-flex"
                  aria-label="SelectonProposerChange an option"
                  formControlName="summaryInsured"
                >
                  <div class="contact-radio-box">
                    <mat-radio-button color="primary" value="yes">Yes</mat-radio-button>
                  </div>
                  <div class="contact-radio-box margin-left">
                    <mat-radio-button color="primary" value="no">No</mat-radio-button>
                  </div>
                </mat-radio-group>
              </div>
              <div fxFlex="32" fxFlex.xs="50" *ngIf="askFormC">
                <mat-label> Is form C applicable? <span class="man-field">*</span> </mat-label>
                <mat-radio-group
                  class="display-flex"
                  aria-label="SelectonProposerChange an option"
                  formControlName="summaryFormcMli"
                >
                  <div class="contact-radio-box">
                    <mat-radio-button color="primary" value="true">Yes</mat-radio-button>
                  </div>
                  <div class="contact-radio-box margin-left">
                    <mat-radio-button color="primary" value="false">No</mat-radio-button>
                  </div>
                </mat-radio-group>
              </div>
              <!-- </mat-card-content>
              </mat-card> -->
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 1, 2)"
              >
                <span class="icon-rounded">
                  <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryTitle">
                          <mat-option *ngFor="let option of titleDropdown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>First Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryFirstName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Last Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryLastName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Date of Birth<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryDOB" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryGender">
                          <mat-option *ngFor="let option of genderDropDown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                          <!-- <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option> -->
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryMaritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Email<span class="man-field">*</span></mat-label>
                        <input matInput type="email" formControlName="summaryEmail" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Mobile Number<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMobile" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label
                          >PAN Card <span class="man-field" *ngIf="panMandatory">*</span></mat-label
                        >
                        <input matInput formControlName="summaryPanNo" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>

            <!-- Insured** -->
            <div
              *ngIf="notSame"
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Insured</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 1, 2)"
              >
                <span class="icon-rounded">
                  <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <!-- Insured -->

            <ng-container *ngIf="notSame">
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Title<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryInsuredTitle">
                          <mat-option
                            *ngFor="let option of insuredTitleDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>First Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryInsuredFirstName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Last Name<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryInsuredLastName" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32" *ngIf="orgCode !== 'DCB'">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Relationship to Proposer<span class="man-field">*</span>
                        </mat-label>
                        <mat-select formControlName="summaryInsuredRelationship">
                          <mat-option
                            *ngFor="let option of proposerRelationShipCopy"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Date of Birth<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryInsuredDOB" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Gender<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryInsuredGender">
                          <mat-option *ngFor="let option of genderDropDown" [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                          <!-- <mat-option value="M">Male</mat-option>
                          <mat-option value="F">Female</mat-option> -->
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Marital Status<span class="man-field">*</span></mat-label
                        >
                        <mat-select formControlName="summaryInsuredMaritalStatus">
                          <mat-option
                            *ngFor="let option of maritalStatusDropdown"
                            [value]="option.id"
                            >{{ option.value }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Email<span class="man-field">*</span></mat-label>
                        <input matInput type="email" formControlName="summaryInsuredEmail" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Mobile Number<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryInsuredMobile" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>PAN Card</mat-label>
                        <input class="uppercase" matInput formControlName="summaryInsuredPanNo" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>

            <div
              class="margin-verticle-20"
              flex
              fxLayout="row wrap"
              fxLayout.xs="column"
              fxLayout.sm="column"
              fxLayoutGap="15px"
            >
              <div fxFlex="20" fxLayoutAlign="start center">
                <span class="headding">Contact Info</span>
              </div>
              <div
                fxFlex="76"
                fxLayoutAlign="end center"
                (click)="navigateToEditScreen(stepper, 2, 3)"
              >
                <span class="icon-rounded">
                  <mat-icon class="red-icon" aria-hidden="false" aria-label="Example home icon"
                    >edit</mat-icon
                  >
                </span>
              </div>
            </div>
            <ng-container>
              <mat-card class="margin-bottom-30">
                <mat-card-content>
                  <div fxFlex="32" fxFlex.xs="100">
                    <mat-label>Are the Permanent and Mailing address the same?</mat-label>
                    <mat-radio-group
                      formControlName="summaryaddressSame"
                      class="display-flex"
                      aria-label="Select an option"
                    >
                      <div class="contact-radio-box">
                        <mat-radio-button color="primary" value="yes">Yes</mat-radio-button>
                      </div>
                      <div class="contact-radio-box margin-left">
                        <mat-radio-button color="primary" value="no">No</mat-radio-button>
                      </div>
                    </mat-radio-group>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card class="margin-bottom-30">
                <p class="margin-top-30">Permanent Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryPolicyaddressline1" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 2<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryPolicyaddressline2" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="summaryPolicyaddressline3" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Pincode<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryPolicypostalcode" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>City<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryPolicycity" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>State<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryPolicystate" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <br />
              <mat-card
                class="margin-bottom-30"
                *ngIf="thirdFormGroup.get('addressSame').value === 'no'"
              >
                <p class="margin-top-30">Mailing Address</p>
                <mat-card-content>
                  <div
                    fxLayout="row wrap"
                    fxLayout.xs="column"
                    fxLayout.sm="column"
                    fxLayoutGap="15px"
                  >
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label class="cus-form-label"
                          >Address Line 1<span class="man-field">*</span></mat-label
                        >
                        <input matInput formControlName="summaryMailingaddressline1" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 2<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMailingaddressline2" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Address Line 3</mat-label>
                        <input matInput formControlName="summaryMailingaddressline3" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>Pincode<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMailingpostalcode" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>City<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMailingcity" />
                      </mat-form-field>
                    </div>
                    <div fxFlex="32">
                      <mat-form-field appearance="fill">
                        <mat-label>State<span class="man-field">*</span></mat-label>
                        <input matInput formControlName="summaryMailingstate" />
                      </mat-form-field>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>

            <mat-card class="margin-top-20" *ngIf="customerConsent">
              <mat-card-content>
                <span class="headding">DECLARATION</span>

                <br />

                <div>
                  <section [formGroup]="checkboxForm">
                    <mat-checkbox
                      class="example-margin"
                      color="primary"
                      formControlName="checkbox1"
                    ></mat-checkbox>

                    I have reviewed the lead form and I agree to share my personal data to
                    {{ applicationData?.insurerName }} to receive personalized assistance tailored
                    to my insurance requirements.

                    <br />
                  </section>
                </div>
              </mat-card-content>
            </mat-card>
            <mat-card class="margin-top-20" *ngIf="orgCode === 'DCB'">
              <mat-card-content>
                <span class="headding">DECLARATION</span>
                <!-- <span class="headding"
                  >The information provided by me in this document is True to the best of my
                  knowledge.</span
                > -->
                <br />
                <div>
                  <section [formGroup]="checkboxForm">
                    <mat-checkbox
                      class="example-margin"
                      color="primary"
                      formControlName="checkbox1"
                    ></mat-checkbox>

                    I hereby declare that I have explained the contents of this application form and
                    have also explained all the important features of the insurance plan. I have
                    explained that the information of the proposer will be sent to respective
                    insurance Company from the Bank's database for pre-population during completion
                    of insurance application, as applicable. I have thereby ensured that the same is
                    completely understood by the life to be assured / proposer and have truthfully
                    recorded the answers provided to me. I further declare that the life to be
                    assured / proposer has signed / affixed his / her thumb impression in my
                    presence (if any).
                    <br />

                    <mat-checkbox
                      class="example-margin"
                      color="primary"
                      formControlName="checkbox2"
                    >
                    </mat-checkbox>

                    I hereby declare that I have personally met the life to be assured / proposer
                    and all statements mentioned are true and correct to the best of my knowledge
                    and belief. I have complied with the Code of Conduct as stated in regulations
                    framed by the Insurance Regulatory and Development Authority of India (IRDAI)
                    and the provisions of my contracts with the Company applicable to the policy to
                    be issued. I have further explained that if any untrue statement(s) /
                    information / response(s) is / are contained herein / including any addendum(s),
                    affidavits, statements, submission furnished / to be furnished, the Company
                    shall have the right to vary the benefits which may be payable and furthermore,
                    if there has been a nondisclosure of any material fact, the policy issued in his
                    / her / their favour pursuant to this proposal may be treated by the Company as
                    null and void.
                  </section>
                </div>
              </mat-card-content>
            </mat-card>
            <div class="text-align-right margin-top-30">
              <ng-container *ngIf="askLeadConverted">
                <label>Converted Lead</label>
                <mat-form-field
                  appearance="fill"
                  [formGroup]="miscellaneousForm"
                >
                  <mat-label><span class="man-field">*</span></mat-label>
                  <mat-select formControlName="leadConverted">
                    <mat-option value="Yes"> Yes </mat-option>
                    <mat-option value="No"> No </mat-option>
                  </mat-select>
                </mat-form-field>
              </ng-container>

              <button class="cancel-btn" mat-button matStepperPrevious *ngIf="!customerConsent">
                Back
              </button>
              <button
                *ngIf="showSubmitBtn && !customerConsent"
                class="next-btn erer"
                mat-button
                (click)="onSubmitClicked()"
                [disabled]="disableSubmit()"
              >
                Submit
              </button>
              <button
                *ngIf="customerConsent && showCIDFOnlyForLife && orgCode == 'DCB'"
                id="blinking-button"
                (click)="getCidf()"
                style="padding: 8px 6px;margin:5px 0px;"
              >
                Open CIDF
              </button>
              <button
                *ngIf="showConsentOption()"
                class="next-btn"
                mat-button
                (click)="submitCustomerConsent(0)"
                [disabled]="makeAcceptDisable()"
                style="padding: 6px 12px;"
              >
                Accept
              </button>
              <button
                *ngIf="showConsentOption()"
                class="cancel-btn"
                mat-button
                (click)="submitCustomerConsent(1)"
                [disabled]="makeAcceptDisable()"
                style="padding: 6px 12px;"
              >
                Reject
              </button>
            </div>
            <div class="spinner-height">
              <p class="submit-error" *ngIf="showSubmitErrorMessage">
                {{ submitErrorMessage }}
              </p>
              <p class="submit-error" *ngIf="showOtpError">OTP entered is invalid.</p>
            </div>
            <div *ngIf="showConsentOption() && orgCode === 'DCB' && showCIDFOnlyForLife" class="font-big">
              Note: Please review CIDF before providing Consent.
            </div>
            <div
              *ngIf="consentAlreadySubmitted && orgCode === 'DCB'"
              class="font-big"
            >
              Note: Customer Consent already given.
            </div>
          </ng-container>
        </form>
      </mat-step>
    </ng-container>
  </mat-vertical-stepper>
</ng-container>

<ng-template #customerErrorTemplate let-key="key">
  <div class="validation-container">
    <ng-container *ngFor="let validation of validationMessages[key]">
      <div
        *ngIf="
          firstFormGroup.get(key)?.hasError(validation.type) &&
          (firstFormGroup.get(key)?.dirty || firstFormGroup.get(key)?.touched)
        "
        class="invalid-feedback"
      >
        {{ validation.message }}
      </div>
      <div
        *ngIf="
          secondFormGroup?.get(key)?.hasError(validation.type) &&
          (secondFormGroup?.get(key)?.dirty || secondFormGroup?.get(key)?.touched)
        "
        class="invalid-feedback"
      >
        {{ validation.message }}
      </div>
      <div
        *ngIf="
          thirdFormGroup?.get(key)?.hasError(validation.type) &&
          (thirdFormGroup?.get(key)?.dirty || thirdFormGroup?.get(key)?.touched)
        "
        class="invalid-feedback"
      >
        {{ validation.message }}
      </div>
    </ng-container>
  </div>
</ng-template>
